<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/ru/webgl-image-processing-continued.md. Do not edited directly -->
<!--
Copyright 2021, GFXFundamentals.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*   Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.

*   Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.

*   Neither the name of GFXFundamentals. nor the names of his
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Как применять несколько техник обработки изображений в WebGL">
<meta name="keywords" content="webgl webgl2 graphics">
<meta name="thumbnail" content="https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-image-processing-continued_ru.jpg">

<meta property="og:title" content="WebGL2 Продвинутая обработка изображений">
<meta property="og:type" content="website">
<meta property="og:image" content="https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-image-processing-continued_ru.jpg">
<meta property="og:description" content="Как применять несколько техник обработки изображений в WebGL">
<meta property="og:url" content="https://webgl2fundamentals.org/webgl/lessons/ru/webgl-image-processing-continued.html">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@greggman">
<meta name="twitter:creator" content="@greggman">
<meta name="twitter:domain" content="webgl2fundamentals.org">
<meta name="twitter:title" content="WebGL2 Продвинутая обработка изображений">
<meta name="twitter:url" content="https://webgl2fundamentals.org/webgl/lessons/ru/webgl-image-processing-continued.html">
<meta name="twitter:description" content="Как применять несколько техник обработки изображений в WebGL">
<meta name="twitter:image:src" content="https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-image-processing-continued_ru.jpg">

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webgl2fundamentals.org/#website",
      "url":"https://webgl2fundamentals.org/",
      "name":"Webgl2Fundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webgl2fundamentals.org/webgl/lessons/ru/webgl-image-processing-continued.html#primaryimage",
      "url":"https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-image-processing-continued_ru.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webgl2fundamentals.org/webgl/lessons/ru/webgl-image-processing-continued.html#webpage",
      "url":"https://webgl2fundamentals.org/webgl/lessons/ru/webgl-image-processing-continued.html",
      "inLanguage":"ru",
      "name":"WebGL2 Продвинутая обработка изображений",
      "keywords":"webgl webgl2 graphics programming",
      "isPartOf":{
        "@id":"https://webgl2fundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webgl2fundamentals.org/webgl/lessons/ru/webgl-image-processing-continued.html#primaryimage"
      }
    }
  ]
}
</script>


<title>WebGL2 Продвинутая обработка изображений</title>
<link href="/webgl/lessons/resources/webgl2fundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/lang.css">
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css">

  <link rel="alternate" hreflang="en" href="https://webglfundamentals.org/webgl/lessons/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="de" href="https://webglfundamentals.org/webgl/lessons/de/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="ja" href="https://webglfundamentals.org/webgl/lessons/ja/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="ko" href="https://webglfundamentals.org/webgl/lessons/ko/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="pt-br" href="https://webglfundamentals.org/webgl/lessons/pt-br/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="ru" href="https://webglfundamentals.org/webgl/lessons/ru/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="zh_cn" href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-image-processing-continued.html">




</head>
<body>
<div class="webgl_navbar">
  <div>
    <select class="language">
    <option value="/webgl/lessons/webgl-image-processing-continued.html" >English</a>
    <option value="/webgl/lessons/de/webgl-image-processing-continued.html" >Deutsch</a>
    <option value="/webgl/lessons/ja/webgl-image-processing-continued.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-image-processing-continued.html" >한국어</a>
    <option value="/webgl/lessons/pt-br/webgl-image-processing-continued.html" >Português Brasileiro</a>
    <option value="/webgl/lessons/ru/webgl-image-processing-continued.html" selected>Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-image-processing-continued.html" >简体中文</a>
</select>


    <a href="#toc">Содержание</a>
    <input type="search" placeholder="?" id="search">
  </div>
</div>
<div class="webgl_header">
  <h1><a href="/webgl/lessons/ru/">WebGL2Fundamentals.org</a></h1>
<style>
#forkongithub>div {
    background: #000;
    color: #fff;
    font-family: arial,sans-serif;
    text-align: center;
    font-weight: bold;
    padding: 5px 40px;
    font-size: 0.9rem;
    line-height: 1.3rem;
    position: relative;
    transition: 0.5s;
    display: block;
    width: 400px;
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(200px) rotate(45deg) translate(10px,70px);
    box-shadow: 4px 4px 10px rgba(0,0,0,0.8);
    pointer-events: auto;
}
#forkongithub a {
  text-decoration: none;
  color: #fff;
}
#forkongithub>div:hover {
    background: #c11;
    color: #fff;
}
#forkongithub .contributors {
  font-size: 0.75rem;
  background: rgba(255,255,255,0.2);
  line-height: 1.2;
  padding: 0.1em;
}
#forkongithub>div::before,#forkongithub>div::after {
    content: "";
    width: 100%;
    display: block;
    position: absolute;
    top: 1px;
    left: 0;
    height: 1px;
    background: #fff;
}
#forkongithub>div::after {
    bottom: 1px;
    top: auto;
}

#forkongithub{
    z-index: 9999;
    /* needed for firefox */
    overflow: hidden;
    width: 300px;
    height: 300px;
    position: absolute;
    right: 0;
    top: 0;
    pointer-events: none;
}
#forkongithub svg{
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
#forkongithub img {
  width: 1em;
  height: 1em;
  border-radius: 100%;
  vertical-align: middle;
}

@media (max-width: 900px) {
    #forkongithub>div {
        line-height: 1.2rem;
    }
}
@media (max-width: 700px) {
  #forkongithub {
    display: none;
  }
}
@media (max-width: 410px) {
    #forkongithub>div {
        font-size: 0.7rem;
        transform: translateX(150px) rotate(45deg) translate(20px,40px);
    }
}

</style>
<div id="forkongithub"><div><div><a href="https://github.com/gfxfundamentals/webgl2-fundamentals">Fix, Fork, Contribute <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904" style="fill:white;"/>
    </g>
</svg>
</a></div></div></div>

</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL2 Продвинутая обработка изображений</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <p>Эта статья является продолжением <a href="webgl-image-processing.html">WebGL Обработка изображений</a>.
Если вы не читали её, советую <a href="webgl-image-processing.html">начать с неё</a>.</p>
<p>Следующий очевидный вопрос для обработки изображений — как применить несколько эффектов?</p>
<p>Можно попробовать генерировать шейдеры на лету. Сделать UI, который позволит
пользователю выбрать нужные эффекты, а затем сгенерировать шейдер, который выполнит
все эти эффекты. Это не всегда возможно, хотя такой подход часто используется для
<a href="https://www.youtube.com/watch?v=cQUn0Zeh-0Q">создания эффектов в реальном времени</a>.</p>
<p>Более гибкий способ — использовать ещё 2 <em>рабочие</em> текстуры и
рендерить поочередно в каждую из них, чередуя (ping-pong),
и каждый раз применять следующий эффект.</p>
<blockquote><pre>Оригинальное изображение -&gt; [Blur]        -&gt; Текстура 1
Текстура 1              -&gt; [Sharpen]     -&gt; Текстура 2
Текстура 2              -&gt; [Edge Detect] -&gt; Текстура 1
Текстура 1              -&gt; [Blur]        -&gt; Текстура 2
Текстура 2              -&gt; [Normal]      -&gt; Canvas</pre></blockquote>
<p>Для этого нам нужно создать framebuffer’ы. В WebGL и OpenGL framebuffer — не совсем удачное название. На самом деле framebuffer — это просто
список привязок (attachments), а не какой-то буфер. Но, привязывая текстуру к framebuffer’у, мы можем рендерить в эту текстуру.</p>
<p>Сначала превратим <a href="webgl-image-processing.html">старый код создания текстуры</a> в функцию:</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  function createAndSetupTexture(gl) {
    var texture = gl.createTexture();
    gl.bindTexture(gl.TEXTURE_2D, texture);

    // Настраиваем текстуру так, чтобы можно было рендерить изображение любого размера и работать с пикселями.
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

    return texture;
  }

  // Создаём текстуру и кладём в неё изображение.
  var originalImageTexture = createAndSetupTexture(gl);

  // Загружаем изображение в текстуру.
  var mipLevel = 0;               // самый крупный mip
  var internalFormat = gl.RGBA;   // формат, который хотим в текстуре
  var srcFormat = gl.RGBA;        // формат исходных данных
  var srcType = gl.UNSIGNED_BYTE  // тип исходных данных
  gl.texImage2D(gl.TEXTURE_2D,
                mipLevel,
                internalFormat,
                srcFormat,
                srcType,
                image);
</code></pre>
<p>Теперь используем эту функцию, чтобы создать ещё 2 текстуры и привязать их к 2 framebuffer’ам.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  // создаём 2 текстуры и привязываем их к framebuffer'ам.
  var textures = [];
  var framebuffers = [];
  for (var ii = 0; ii &lt; 2; ++ii) {
    var texture = createAndSetupTexture(gl);
    textures.push(texture);

    // делаем текстуру такого же размера, как изображение
    var mipLevel = 0;               // самый крупный mip
    var internalFormat = gl.RGBA;   // формат, который хотим в текстуре
    var border = 0;                 // должен быть 0
    var srcFormat = gl.RGBA;        // формат исходных данных
    var srcType = gl.UNSIGNED_BYTE  // тип исходных данных
    var data = null;                // нет данных = создаём пустую текстуру
    gl.texImage2D(
        gl.TEXTURE_2D, mipLevel, internalFormat, image.width, image.height, border,
        srcFormat, srcType, data);

    // Создаём framebuffer
    var fbo = gl.createFramebuffer();
    framebuffers.push(fbo);
    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);

    // Привязываем к нему текстуру.
    var attachmentPoint = gl.COLOR_ATTACHMENT0;
    gl.framebufferTexture2D(
        gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, texture, mipLevel);
  }
</code></pre>
<p>Теперь создадим набор ядер (kernels), а затем список, какие из них применять.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  // Определяем несколько свёрточных ядер
  var kernels = {
    normal: [
      0, 0, 0,
      0, 1, 0,
      0, 0, 0
    ],
    gaussianBlur: [
      0.045, 0.122, 0.045,
      0.122, 0.332, 0.122,
      0.045, 0.122, 0.045
    ],
    unsharpen: [
      -1, -1, -1,
      -1,  9, -1,
      -1, -1, -1
    ],
    emboss: [
       -2, -1,  0,
       -1,  1,  1,
        0,  1,  2
    ]
  };

  // Список эффектов, которые нужно применить.
  var effectsToApply = [
    &quot;gaussianBlur&quot;,
    &quot;emboss&quot;,
    &quot;gaussianBlur&quot;,
    &quot;unsharpen&quot;
  ];
</code></pre>
<p>И наконец применим каждый из них, чередуя, в какую текстуру рендерим</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  function drawEffects() {
    // Говорим использовать нашу программу (пару шейдеров)
    gl.useProgram(program);

    // Привязываем нужный набор атрибутов/буферов.
    gl.bindVertexArray(vao);

    // начинаем с оригинального изображения на unit 0
    gl.activeTexture(gl.TEXTURE0 + 0);
    gl.bindTexture(gl.TEXTURE_2D, originalImageTexture);

    // Говорим шейдеру брать текстуру из texture unit 0
    gl.uniform1i(imageLocation, 0);

    // не переворачиваем изображение по Y при рендере в текстуры
    gl.uniform1f(flipYLocation, 1);

    // проходим по каждому эффекту, который хотим применить.
    var count = 0;
    for (var ii = 0; ii &lt; tbody.rows.length; ++ii) {
      var checkbox = tbody.rows[ii].firstChild.firstChild;
      if (checkbox.checked) {
        // Настраиваем рендер в один из framebuffer'ов.
        setFramebuffer(framebuffers[count % 2], image.width, image.height);

        drawWithKernel(checkbox.value);

        // для следующего эффекта используем текстуру, в которую только что отрендерили.
        gl.bindTexture(gl.TEXTURE_2D, textures[count % 2]);

        // увеличиваем count, чтобы в следующий раз использовать другую текстуру.
        ++count;
      }
    }

    // наконец рендерим результат на canvas.
    gl.uniform1f(flipYLocation, -1);  // нужно перевернуть по Y для canvas

    setFramebuffer(null, gl.canvas.width, gl.canvas.height);

    drawWithKernel(&quot;normal&quot;);
  }

  function setFramebuffer(fbo, width, height) {
    // делаем этот framebuffer текущим для рендера.
    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);

    // Говорим шейдеру разрешение framebuffer'а.
    gl.uniform2f(resolutionLocation, width, height);

    // Говорим WebGL, как преобразовывать из clip space в пиксели
    gl.viewport(0, 0, width, height);
  }

  function drawWithKernel(name) {
    // задаём ядро и его вес
    gl.uniform1fv(kernelLocation, kernels[name]);
    gl.uniform1f(kernelWeightLocation, computeKernelWeight(kernels[name]));

    // Рисуем прямоугольник.
    var primitiveType = gl.TRIANGLES;
    var offset = 0;
    var count = 6;
    gl.drawArrays(primitiveType, offset, count);
  }
</code></pre>
<p>Вот рабочая версия с немного более гибким UI. Отметьте эффекты,
чтобы включить их. Перетаскивайте эффекты, чтобы изменить порядок их применения.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-image-processing.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-2d-image-processing.html" target="_blank">Нажмите, чтобы открыть в новом окне</a>
</div>

</p>
<p>Некоторые вещи, которые я должен объяснить.</p>
<p>Вызов <code class="notranslate" translate="no">gl.bindFramebuffer</code> с <code class="notranslate" translate="no">null</code> говорит WebGL, что вы хотите рендерить
на canvas вместо одного из ваших framebuffer’ов.</p>
<p>Также framebuffer’ы могут работать или не работать в зависимости от того, какие привязки
вы на них помещаете. Есть список того, какие типы и комбинации привязок
должны всегда работать. Используемая здесь, одна текстура <code class="notranslate" translate="no">RGBA</code>/<code class="notranslate" translate="no">UNSIGNED_BYTE</code>,
назначенная точке привязки <code class="notranslate" translate="no">COLOR_ATTACHMENT0</code>, должна всегда работать.
Более экзотические форматы текстур и/или комбинации привязок могут не работать.
В этом случае вы должны привязать framebuffer и затем вызвать
<code class="notranslate" translate="no">gl.checkFramebufferStatus</code> и посмотреть, возвращает ли он <code class="notranslate" translate="no">gl.FRAMEBUFFER_COMPLETE</code>.
Если да, то все в порядке. Если нет, вам нужно будет сказать пользователю использовать
что-то другое. К счастью, WebGL2 поддерживает многие форматы и комбинации.</p>
<p>WebGL должен преобразовывать из <a href="webgl-fundamentals.html">clip space</a> обратно в пиксели.
Он делает это на основе настроек <code class="notranslate" translate="no">gl.viewport</code>. Поскольку framebuffer’ы,
в которые мы рендерим, имеют другой размер, чем canvas, нам нужно установить
viewport соответствующим образом в зависимости от того, рендерим ли мы в текстуру или canvas.</p>
<p>Наконец, в <a href="webgl-fundamentals.html">оригинальном примере</a> мы переворачивали координату Y
при рендеринге, потому что WebGL отображает canvas с 0,0 в левом нижнем углу
вместо более традиционного для 2D левого верхнего угла. Это не нужно
при рендеринге в framebuffer. Поскольку framebuffer никогда не отображается,
какая часть является верхом и низом, не имеет значения. Все, что имеет значение,
это то, что пиксель 0,0 в framebuffer соответствует 0,0 в наших вычислениях.
Чтобы справиться с этим, я сделал возможным установить, переворачивать или нет, добавив
еще один uniform вход в вызов шейдера <code class="notranslate" translate="no">u_flipY</code>.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">...
+uniform float u_flipY;
...

void main() {
  ...
+   gl_Position = vec4(clipSpace * vec2(1, u_flipY), 0, 1);
  ...
}
</code></pre>
<p>И затем мы можем установить это при рендеринге с помощью</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  ...
+  var flipYLocation = gl.getUniformLocation(program, &quot;u_flipY&quot;);

  ...

+  // не переворачиваем
+  gl.uniform1f(flipYLocation, 1);

  ...

+  // переворачиваем
+  gl.uniform1f(flipYLocation, -1);
</code></pre>
<p>Я сохранил этот пример простым, используя одну GLSL программу, которая может достичь
множественных эффектов. Если бы вы хотели делать полноценную обработку изображений, вам, вероятно,
понадобилось бы много GLSL программ. Программа для настройки оттенка, насыщенности и яркости.
Другая для яркости и контрастности. Одна для инвертирования, другая для настройки
уровней и т.д. Вам нужно будет изменить код для переключения GLSL программ и обновления
параметров для этой конкретной программы. Я рассматривал написание этого примера,
но это упражнение лучше оставить читателю, потому что множественные GLSL программы, каждая
со своими потребностями в параметрах, вероятно, означает серьезный рефакторинг, чтобы все
не превратилось в большую путаницу спагетти-кода.</p>
<p>Я надеюсь, что этот и предыдущие примеры сделали WebGL немного более
доступным, и я надеюсь, что начало с 2D помогает сделать WebGL немного легче для
понимания. Если я найду время, я попробую написать <a href="webgl-2d-translation.html">еще несколько статей</a>
о том, как делать 3D, а также больше деталей о <a href="webgl-how-it-works.html">том, что WebGL действительно делает под капотом</a>.
Для следующего шага рассмотрите изучение <a href="webgl-2-textures.html">как использовать 2 или более текстур</a>.</p>

    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgl/lessons/webgl-image-processing-continued.html" >English</a>
    <option value="/webgl/lessons/de/webgl-image-processing-continued.html" >Deutsch</a>
    <option value="/webgl/lessons/ja/webgl-image-processing-continued.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-image-processing-continued.html" >한국어</a>
    <option value="/webgl/lessons/pt-br/webgl-image-processing-continued.html" >Português Brasileiro</a>
    <option value="/webgl/lessons/ru/webgl-image-processing-continued.html" selected>Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-image-processing-continued.html" >简体中文</a>
</select>


        <div id="toc">
          <ul>  <li>Основы</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-getting-webgl2.html">Как использовать WebGL2</a></li>
<li><a href="/webgl/lessons/ru/webgl-fundamentals.html">Основы</a></li>
<li><a href="/webgl/lessons/ru/webgl-how-it-works.html">Как это работает</a></li>
<li><a href="/webgl/lessons/ru/webgl-shaders-and-glsl.html">Шейдеры и GLSL</a></li>
<li><a href="/webgl/lessons/resources/webgl-state-diagram.html">WebGL2 Диаграмма состояния</a></li>
        </ul>
  <li>WebGL2 vs WebGL1</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl2-whats-new.html">Что нового в WebGL2</a></li>
<li><a href="/webgl/lessons/ru/webgl1-to-webgl2.html">Переход с WebGL1 на WebGL2</a></li>
<li><a href="/webgl/lessons/ru/webgl1-to-webgl2-fundamentals.html">Отличия от WebGLFundamentals.org до WebGL2Fundamentals.org</a></li>
        </ul>
  <li>Обработка изображений</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-image-processing.html">Обработка изображений</a></li>
<li><a href="/webgl/lessons/ru/webgl-image-processing-continued.html">Продвинутая обработка изображений</a></li>
        </ul>
  <li>2D трансформации, повороты, масштабирование и матричные операции</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-2d-translation.html">2D Трансляция</a></li>
<li><a href="/webgl/lessons/ru/webgl-2d-rotation.html">2D Вращение</a></li>
<li><a href="/webgl/lessons/ru/webgl-2d-scale.html">2D Масштабирование</a></li>
<li><a href="/webgl/lessons/ru/webgl-2d-matrices.html">2D Матрицы</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-3d-orthographic.html">Ортографическая 3D</a></li>
<li><a href="/webgl/lessons/ru/webgl-3d-perspective.html">3D Перспектива</a></li>
<li><a href="/webgl/lessons/ru/webgl-3d-camera.html">3D - Камеры</a></li>
<li><a href="/webgl/lessons/ru/webgl-matrix-naming.html">3D - Именование матриц</a></li>
        </ul>
  <li>Освещение</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-3d-lighting-directional.html">Направленное освещение</a></li>
<li><a href="/webgl/lessons/ru/webgl-3d-lighting-point.html">Точечное освещение</a></li>
<li><a href="/webgl/lessons/ru/webgl-3d-lighting-spot.html">Прожекторное освещение</a></li>
        </ul>
  <li>Организация и рефакторинг</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-less-code-more-fun.html">Меньше кода, больше удовольствия</a></li>
<li><a href="/webgl/lessons/ru/webgl-drawing-multiple-things.html">Рисование множественных объектов</a></li>
<li><a href="/webgl/lessons/ru/webgl-scene-graph.html">Графы сцен</a></li>
        </ul>
  <li>Геометрия</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-3d-geometry-lathe.html">3D Геометрия - Токарная обработка</a></li>
<li><a href="/webgl/lessons/ru/webgl-load-obj.html">Загрузка .obj файлов</a></li>
<li><a href="/webgl/lessons/ru/webgl-load-obj-w-mtl.html">Загрузка .obj с .mtl файлами</a></li>
        </ul>
  <li>Текстуры</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-3d-textures.html">Текстуры</a></li>
<li><a href="/webgl/lessons/ru/webgl-data-textures.html">Data Textures</a></li>
<li><a href="/webgl/lessons/ru/webgl-2-textures.html">Использование 2 или более текстур</a></li>
<li><a href="/webgl/lessons/ru/webgl-cors-permission.html">Cross Origin Images</a></li>
<li><a href="/webgl/lessons/ru/webgl-3d-perspective-correct-texturemapping.html">Перспективно-корректное наложение текстур</a></li>
<li><a href="/webgl/lessons/ru/webgl-planar-projection-mapping.html">Планарное и перспективное проекционное отображение</a></li>
        </ul>
  <li>Рендеринг в текстуру</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-render-to-texture.html">Рендеринг в текстуру</a></li>
        </ul>
  <li>Тени</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-shadows.html">Тени</a></li>
        </ul>
  <li>Техники</li>
        <ul>
            <li>2D</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-2d-drawimage.html">2D - DrawImage</a></li>
<li><a href="/webgl/lessons/ru/webgl-2d-matrix-stack.html">2D - Стек Матриц</a></li>
<li><a href="/webgl/lessons/ru/webgl-sprites.html">Спрайты</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-cube-maps.html">Кубические карты</a></li>
<li><a href="/webgl/lessons/ru/webgl-environment-maps.html">Карты окружения</a></li>
<li><a href="/webgl/lessons/ru/webgl-skybox.html">Скайбоксы</a></li>
<li><a href="/webgl/lessons/ru/webgl-skinning.html">Скининг</a></li>
<li><a href="/webgl/lessons/ru/webgl-fog.html">Fog</a></li>
<li><a href="/webgl/lessons/ru/webgl-picking.html">Выбор объектов (клик по объектам)</a></li>
        </ul>
  <li>Текст</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-text-html.html">Текст - HTML</a></li>
<li><a href="/webgl/lessons/ru/webgl-text-canvas2d.html">Текст - Canvas 2D</a></li>
<li><a href="/webgl/lessons/ru/webgl-text-texture.html">Текст - Использование текстуры</a></li>
<li><a href="/webgl/lessons/ru/webgl-text-glyphs.html">Текст - Использование текстуры глифов</a></li>
        </ul>
  <li>GPGPU</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-gpgpu.html">GPGPU</a></li>
        </ul>
        </ul>
  <li>Советы</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-smallest-programs.html">Самые маленькие программы</a></li>
<li><a href="/webgl/lessons/ru/webgl-drawing-without-data.html">Рисование без данных</a></li>
<li><a href="/webgl/lessons/ru/webgl-shadertoy.html">Shadertoy</a></li>
<li><a href="/webgl/lessons/ru/webgl-pulling-vertices.html">Вытягивание вершин</a></li>
        </ul>
  <li>Оптимизация</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-indexed-vertices.html">Индексированные вершины (gl.drawElements)</a></li>
<li><a href="/webgl/lessons/ru/webgl-instanced-drawing.html">Инстансинг (Instanced Drawing)</a></li>
        </ul>
  <li>Разное</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-setup-and-installation.html">Настройка и установка</a></li>
<li><a href="/webgl/lessons/ru/webgl-boilerplate.html">Boilerplate</a></li>
<li><a href="/webgl/lessons/ru/webgl-resizing-the-canvas.html">Изменение размера Canvas</a></li>
<li><a href="/webgl/lessons/ru/webgl-animation.html">Анимация</a></li>
<li><a href="/webgl/lessons/ru/webgl-points-lines-triangles.html">Точки, линии и треугольники</a></li>
<li><a href="/webgl/lessons/ru/webgl-multiple-views.html">Множественные виды, множественные canvas</a></li>
<li><a href="/webgl/lessons/ru/webgl-visualizing-the-camera.html">Визуализация камеры</a></li>
<li><a href="/webgl/lessons/ru/webgl-and-alpha.html">WebGL2 и альфа-канал</a></li>
<li><a href="/webgl/lessons/ru/webgl-2d-vs-3d-library.html">2D против 3D библиотек</a></li>
<li><a href="/webgl/lessons/ru/webgl-anti-patterns.html">Анти-паттерны</a></li>
<li><a href="/webgl/lessons/ru/webgl-matrix-vs-math.html">WebGL2 Матрицы против математических матриц</a></li>
<li><a href="/webgl/lessons/ru/webgl-precision-issues.html">Проблемы точности</a></li>
<li><a href="/webgl/lessons/ru/webgl-tips.html#screenshot">Скриншот канваса</a></li>
<li><a href="/webgl/lessons/ru/webgl-tips.html#preservedrawingbuffer">Как не очищать канвас</a></li>
<li><a href="/webgl/lessons/ru/webgl-tips.html#tabindex">Получение ввода с клавиатуры</a></li>
<li><a href="/webgl/lessons/ru/webgl-tips.html#html-background">Использование WebGL2 как фона в HTML</a></li>
<li><a href="/webgl/lessons/ru/webgl-cross-platform-issues.html">Cross Platform Issues</a></li>
<li><a href="/webgl/lessons/ru/webgl-qna.html">Questions and Answers</a></li>
        </ul>
  <li>Справочник</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-attributes.html">Атрибуты</a></li>
<li><a href="/webgl/lessons/ru/webgl-texture-units.html">Текстурные юниты</a></li>
<li><a href="/webgl/lessons/ru/webgl-framebuffers.html">Framebuffers</a></li>
<li><a href="/webgl/lessons/ru/webgl-readpixels.html">readPixels</a></li>
<li><a href="/webgl/lessons/ru/webgl-references.html">Ссылки</a></li>
        </ul></ul>
<ul>
  <li><a href="/docs/">API документация</a></li>
  <li><a href="https://twgljs.org">TWGL, легковесная библиотека-помощник для WebGL</a></li>
  <li><a href="https://github.com/gfxfundamentals/webgl2-fundamentals">GitHub</a></li>
</ul>
        </div>
    </div>
    <div class="lesson-comments">
        
<div>Есть предложения или замечания? <a href="https://github.com/gfxfundamentals/webgl2-fundamentals/issues">Создайте issue на GitHub</a>.</div>
  

        <div id="disqus_thread"></div>
        <script>
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webgl2fundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL2 Продвинутая обработка изображений';
            var disqus_title = 'WebGL2 Продвинутая обработка изображений';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webgl2fundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>
</body>
<script>
const settings = {
  contribTemplate: "Спасибо <a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a><br>за <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} вкладов</a>",
  owner: "gfxfundamentals",
  repo: "webgl2-fundamentals",
};
</script>
<script src="/contributors.js"></script>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js" type="module"></script>
<script>
</script>


</html>




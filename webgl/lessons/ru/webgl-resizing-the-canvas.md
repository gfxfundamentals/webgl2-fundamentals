Title: WebGL2 –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ Canvas.
Description: –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä WebGL canvas –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —ç—Ç–∏–º –ø—Ä–æ–±–ª–µ–º—ã
TOC: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ Canvas

–í–æ—Ç —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä canvas.

–£ –∫–∞–∂–¥–æ–≥–æ canvas –µ—Å—Ç—å 2 —Ä–∞–∑–º–µ—Ä–∞. –†–∞–∑–º–µ—Ä –µ–≥–æ drawingbuffer. –≠—Ç–æ —Å–∫–æ–ª—å–∫–æ –ø–∏–∫—Å–µ–ª–µ–π –≤ canvas.
–í—Ç–æ—Ä–æ–π —Ä–∞–∑–º–µ—Ä - —ç—Ç–æ —Ä–∞–∑–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è canvas. CSS –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º canvas
–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.

–í—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–º–µ—Ä drawingbuffer canvas –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏. –û–¥–∏–Ω –∏—Å–ø–æ–ª—å–∑—É—è HTML

```html
<canvas id="c" width="400" height="300"></canvas>
```

–î—Ä—É–≥–æ–π –∏—Å–ø–æ–ª—å–∑—É—è JavaScript

```html
<canvas id="c"></canvas>
```

JavaScript

```js
const canvas = document.querySelector("#c");
canvas.width = 400;
canvas.height = 300;
```

–ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è canvas, –µ—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç CSS, –∫–æ—Ç–æ—Ä—ã–π –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–∑–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è canvas,
—Ä–∞–∑–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–¥–µ—Ç —Ç–∞–∫–∏–º –∂–µ, –∫–∞–∫ —Ä–∞–∑–º–µ—Ä –µ–≥–æ drawingbuffer. –ü–æ—ç—Ç–æ–º—É –≤ 2 –ø—Ä–∏–º–µ—Ä–∞—Ö –≤—ã—à–µ drawingbuffer canvas —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 400x300,
–∏ –µ–≥–æ —Ä–∞–∑–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∞–∫–∂–µ 400x300.

–í–æ—Ç –ø—Ä–∏–º–µ—Ä canvas, —á–µ–π drawingbuffer —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 10x15 –ø–∏–∫—Å–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 400x300 –ø–∏–∫—Å–µ–ª–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

```html
<canvas id="c" width="10" height="15" style="width: 400px; height: 300px;"></canvas>
```

–∏–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫

```html
<style>
#c {
  width: 400px;
  height: 300px;
}
</style>
<canvas id="c" width="10" height="15"></canvas>
```

–ï—Å–ª–∏ –º—ã –Ω–∞—Ä–∏—Å—É–µ–º –æ–¥–Ω—É –ø–∏–∫—Å–µ–ª—å–Ω—É—é –≤—Ä–∞—â–∞—é—â—É—é—Å—è –ª–∏–Ω–∏—é –≤ —ç—Ç–æ—Ç canvas, –º—ã —É–≤–∏–¥–∏–º —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —ç—Ç–æ–≥–æ

{{{example url="../webgl-10x15-canvas-400x300-css.html" }}}

–ü–æ—á–µ–º—É —ç—Ç–æ —Ç–∞–∫ —Ä–∞–∑–º—ã—Ç–æ? –ü–æ—Ç–æ–º—É —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä –±–µ—Ä–µ—Ç –Ω–∞—à 10x15 –ø–∏–∫—Å–µ–ª—å–Ω—ã–π canvas –∏ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç –µ–≥–æ –¥–æ 400x300 –ø–∏–∫—Å–µ–ª–µ–π, –∏
–æ–±—ã—á–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –µ–≥–æ –ø—Ä–∏ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–Ω–∏–∏.

–ò—Ç–∞–∫, —á—Ç–æ –º—ã –¥–µ–ª–∞–µ–º, –µ—Å–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã canvas –∑–∞–ø–æ–ª–Ω–∏–ª –æ–∫–Ω–æ? –ù—É, —Å–Ω–∞—á–∞–ª–∞ –º—ã –º–æ–∂–µ–º –∑–∞—Å—Ç–∞–≤–∏—Ç—å
–±—Ä–∞—É–∑–µ—Ä —Ä–∞—Å—Ç—è–Ω—É—Ç—å canvas, —á—Ç–æ–±—ã –∑–∞–ø–æ–ª–Ω–∏—Ç—å –æ–∫–Ω–æ —Å –ø–æ–º–æ—â—å—é CSS. –ü—Ä–∏–º–µ—Ä

    <html>
      <head>
        <style>
          /*  */
          html, body {
            height: 100%;
            margin: 0;
          }
          /* –¥–µ–ª–∞–µ–º canvas –∑–∞–ø–æ–ª–Ω—è—é—â–∏–º –µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
          #c {
            width: 100%;
            height: 100%;
            display: block;
          }
        </style>
      </head>
      <body>
        <canvas id="c"></canvas>
      </body>
    </html>

–¢–µ–ø–µ—Ä—å –Ω–∞–º –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å drawingbuffer —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –ª—é–±–æ–º—É —Ä–∞–∑–º–µ—Ä—É, –¥–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä —Ä–∞—Å—Ç—è–Ω—É–ª canvas.
–≠—Ç–æ, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–ª–æ–∂–Ω–∞—è —Ç–µ–º–∞. –î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `clientWidth` –∏ `clientHeight`

–≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±.
`clientWidth` –∏ `clientHeight` - —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å —É –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ HTML, –∫–æ—Ç–æ—Ä—ã–µ –≥–æ–≤–æ—Ä—è—Ç –Ω–∞–º
—Ä–∞–∑–º–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ CSS –ø–∏–∫—Å–µ–ª—è—Ö.

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: Client rect –≤–∫–ª—é—á–∞–µ—Ç –ª—é–±–æ–π CSS padding, –ø–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `clientWidth`
–∏/–∏–ª–∏ `clientHeight`, –ª—É—á—à–µ –Ω–µ —Å—Ç–∞–≤–∏—Ç—å –Ω–∏–∫–∞–∫–æ–π padding –Ω–∞ –≤–∞—à canvas —ç–ª–µ–º–µ–Ω—Ç.

–ò—Å–ø–æ–ª—å–∑—É—è JavaScript, –º—ã –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –∞ –∑–∞—Ç–µ–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å
—Ä–∞–∑–º–µ—Ä –µ–≥–æ drawingbuffer, —á—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å.

```js
function resizeCanvasToDisplaySize(canvas) {
  // –ò—â–µ–º —Ä–∞–∑–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—Ä–∞—É–∑–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç canvas –≤ CSS –ø–∏–∫—Å–µ–ª—è—Ö.
  const displayWidth  = canvas.clientWidth;
  const displayHeight = canvas.clientHeight;

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ canvas —Ç–æ–≥–æ –∂–µ —Ä–∞–∑–º–µ—Ä–∞.
  const needResize = canvas.width  !== displayWidth ||
                     canvas.height !== displayHeight;

  if (needResize) {
    // –î–µ–ª–∞–µ–º canvas —Ç–æ–≥–æ –∂–µ —Ä–∞–∑–º–µ—Ä–∞
    canvas.width  = displayWidth;
    canvas.height = displayHeight;
  }

  return needResize;
}
```

–î–∞–≤–∞–π—Ç–µ –≤—ã–∑–æ–≤–µ–º —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º,
—á—Ç–æ–±—ã –æ–Ω–∞ –≤—Å–µ–≥–¥–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–ª–∞ canvas –¥–æ –Ω–∞—à–µ–≥–æ –∂–µ–ª–∞–µ–º–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ–º.

```js
function drawScene() {
   resizeCanvasToDisplaySize(gl.canvas);

   ...
```

–ò –≤–æ—Ç —ç—Ç–æ

{{{example url="../webgl-resize-canvas.html" }}}

–≠–π, —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫? –ü–æ—á–µ–º—É –ª–∏–Ω–∏—è –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—é –æ–±–ª–∞—Å—Ç—å?

–ü—Ä–∏—á–∏–Ω–∞ –≤ —Ç–æ–º, —á—Ç–æ –∫–æ–≥–¥–∞ –º—ã –∏–∑–º–µ–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä canvas, –Ω–∞–º —Ç–∞–∫–∂–µ –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `gl.viewport`, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å viewport.
`gl.viewport` –≥–æ–≤–æ—Ä–∏—Ç WebGL, –∫–∞–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –æ—Ç—Å–µ—á–µ–Ω–∏—è (-1 –¥–æ +1) –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø–∏–∫—Å–µ–ª–∏ –∏ –≥–¥–µ —ç—Ç–æ –¥–µ–ª–∞—Ç—å
–≤–Ω—É—Ç—Ä–∏ canvas. –ö–æ–≥–¥–∞ –≤—ã –≤–ø–µ—Ä–≤—ã–µ —Å–æ–∑–¥–∞–µ—Ç–µ WebGL –∫–æ–Ω—Ç–µ–∫—Å—Ç, WebGL —É—Å—Ç–∞–Ω–æ–≤–∏—Ç viewport, —á—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—É
canvas, –Ω–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤–∞–º –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ. –ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω—è–µ—Ç–µ —Ä–∞–∑–º–µ—Ä canvas,
–≤–∞–º –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å WebGL –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É viewport.

–î–∞–≤–∞–π—Ç–µ –∏–∑–º–µ–Ω–∏–º –∫–æ–¥, —á—Ç–æ–±—ã –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ç–æ. –ü–æ–º–∏–º–æ —ç—Ç–æ–≥–æ, –ø–æ—Å–∫–æ–ª—å–∫—É WebGL –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–º–µ–µ—Ç
—Å—Å—ã–ª–∫—É –Ω–∞ canvas, –¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–¥–∞–¥–∏–º —ç—Ç–æ –≤ resize.

    function drawScene() {
       resizeCanvasToDisplaySize(gl.canvas);

    +   gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
       ...

–¢–µ–ø–µ—Ä—å —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.

{{{example url="../webgl-resize-canvas-viewport.html" }}}

–û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ, –∏–∑–º–µ–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –æ–Ω–æ –≤—Å–µ–≥–¥–∞ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –æ–∫–Ω–æ.

–Ø —Å–ª—ã—à—É, –∫–∞–∫ –≤—ã —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç–µ, *–ø–æ—á–µ–º—É WebGL –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç viewport –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –Ω–∞—Å,
–∫–æ–≥–¥–∞ –º—ã –∏–∑–º–µ–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä canvas?* –ü—Ä–∏—á–∏–Ω–∞ –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫ –∏–ª–∏ –ø–æ—á–µ–º—É
–≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ viewport. –í—ã –º–æ–≥–ª–∏ –±—ã [—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –≤ framebuffer](webgl-render-to-texture.html)
–∏–ª–∏ –¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –µ—â–µ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥—Ä—É–≥–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ viewport. WebGL –Ω–µ –∏–º–µ–µ—Ç
—Å–ø–æ—Å–æ–±–∞ —É–∑–Ω–∞—Ç—å –≤–∞—à–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ, –ø–æ—ç—Ç–æ–º—É –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å viewport –¥–ª—è –≤–∞—Å.

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ `devicePixelRatio` –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—á–µ–º—É —ç—Ç–æ –Ω–µ –∫–æ–Ω–µ—Ü? –ù—É, –∑–¥–µ—Å—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω–æ.

–ü–µ—Ä–≤–æ–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å, —ç—Ç–æ —Ç–æ, —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–∞–∑–º–µ—Ä–æ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –≤ CSS –ø–∏–∫—Å–µ–ª—å–Ω—ã—Ö
–µ–¥–∏–Ω–∏—Ü–∞—Ö. –≠—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ —Å–¥–µ–ª–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –¢–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä,
–≤ –Ω–∞—á–∞–ª–µ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏ –º—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Ä–∞–∑–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è canvas –≤ 400x300 CSS
–ø–∏–∫—Å–µ–ª–µ–π. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è HD-DPI –¥–∏—Å–ø–ª–µ–π, –∏–ª–∏ –æ–Ω —É–≤–µ–ª–∏—á–µ–Ω –∏–ª–∏
—É–º–µ–Ω—å—à–µ–Ω, –∏–ª–∏ –∏–º–µ–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –û–°, —Å–∫–æ–ª—å–∫–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∏–∫—Å–µ–ª–µ–π —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç –Ω–∞
–º–æ–Ω–∏—Ç–æ—Ä–µ, –±—É–¥–µ—Ç —Ä–∞–∑–Ω—ã–º.

`window.devicePixelRatio` —Å–∫–∞–∂–µ—Ç –Ω–∞–º –≤ –æ–±—â–µ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∏–∫—Å–µ–ª–µ–π
–∫ CSS –ø–∏–∫—Å–µ–ª—è–º –Ω–∞ –≤–∞—à–µ–º –º–æ–Ω–∏—Ç–æ—Ä–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Ç —Ç–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∞—à–µ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞

> <div>devicePixelRatio = <span data-diagram="dpr"></span></div>

–ï—Å–ª–∏ –≤—ã –Ω–∞ –Ω–∞—Å—Ç–æ–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏–ª–∏ –Ω–æ—É—Ç–±—É–∫–µ, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–∂–∞—Ç—å <kbd>ctrl</kbd>+<kbd>+</kbd> –∏ <kbd>ctrl</kbd>+<kbd>-</kbd>, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å –∏ —É–º–µ–Ω—å—à–∏—Ç—å (<kbd>‚åò</kbd>+<kbd>+</kbd> –∏ <kbd>‚åò</kbd>+<kbd>-</kbd> –Ω–∞ Mac). –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ —á–∏—Å–ª–æ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è.

–ò—Ç–∞–∫, –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏–∫—Å–µ–ª–µ–π –≤ canvas —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–∏–∫—Å–µ–ª–µ–π, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–ª—è –µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è,
–∫–∞–∑–∞–ª–æ—Å—å –±—ã –æ—á–µ–≤–∏–¥–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –±—ã–ª–æ –±—ã —É–º–Ω–æ–∂–∏—Ç—å `clientWidth` –∏ `clientHeight` –Ω–∞ `devicePixelRatio`, –∫–∞–∫ —ç—Ç–æ:

```js
function resizeCanvasToDisplaySize(canvas) {
  // –ò—â–µ–º —Ä–∞–∑–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—Ä–∞—É–∑–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç canvas –≤ CSS –ø–∏–∫—Å–µ–ª—è—Ö.
  const dpr = window.devicePixelRatio;
  const displayWidth  = Math.round(canvas.clientWidth * dpr);
  const displayHeight = Math.round(canvas.clientHeight * dpr);

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ canvas —Ç–æ–≥–æ –∂–µ —Ä–∞–∑–º–µ—Ä–∞.
  const needResize = canvas.width  != displayWidth || 
                     canvas.height != displayHeight;

  if (needResize) {
    // –î–µ–ª–∞–µ–º canvas —Ç–æ–≥–æ –∂–µ —Ä–∞–∑–º–µ—Ä–∞
    canvas.width  = displayWidth;
    canvas.height = displayHeight;
  }

  return needResize;
}
``` 

–ù–∞–º –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `Math.round` (–∏–ª–∏ `Math.ceil`, –∏–ª–∏ `Math.floor` –∏–ª–∏ `| 0`), —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —á–∏—Å–ª–æ
–∫ —Ü–µ–ª–æ–º—É, –ø–æ—Ç–æ–º—É —á—Ç–æ `canvas.width` –∏ `canvas.height` –≤—Å–µ–≥–¥–∞ –≤ —Ü–µ–ª—ã—Ö —á–∏—Å–ª–∞—Ö, –ø–æ—ç—Ç–æ–º—É
–Ω–∞—à–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å, –µ—Å–ª–∏ `devicePixelRatio` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º, —á—Ç–æ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è, –æ—Å–æ–±–µ–Ω–Ω–æ
–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç.

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏ `Math.floor` –∏–ª–∏ `Math.ceil` –∏–ª–∏ `Math.round` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ HTML
—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π. –≠—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞. üôÑ

–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, —ç—Ç–æ **–Ω–µ** –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ. –ù–æ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ `devicePixelRatio`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ä–∞–≤–µ–Ω 1.0,
CSS —Ä–∞–∑–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–µ–Ω canvas, —á—Ç–æ–±—ã –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å, –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å —Ü–µ–ª—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º,
–Ω–æ `clientWidth` –∏ `clientHeight` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–∞–∫ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞. –î–æ–ø—É—Å—Ç–∏–º, –æ–∫–Ω–æ
999 —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∏–∫—Å–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —à–∏—Ä–∏–Ω—É, –≤–∞—à devicePixelRatio = 2.0, –∏ –≤—ã –ø—Ä–æ—Å–∏—Ç–µ canvas —Ä–∞–∑–º–µ—Ä–æ–º 100%.
–ù–µ—Ç —Ü–µ–ª–æ–≥–æ CSS —Ä–∞–∑–º–µ—Ä–∞ * 2.0, –∫–æ—Ç–æ—Ä—ã–π = 999.

–°–ª–µ–¥—É—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
[`getBoundingClientRect()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect).
–û–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç [`DOMRect`](https://developer.mozilla.org/en-US/docs/Web/API/DOMRect), 
–∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç `width` –∏ `height`. –≠—Ç–æ —Ç–æ—Ç –∂–µ
client rect, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω `clientWidth` –∏ `clientHeight`, –Ω–æ –æ–Ω –Ω–µ –æ–±—è–∑–∞–Ω
–±—ã—Ç—å —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º.

–ù–∏–∂–µ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π `<canvas>`, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `width: 100%` –µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –£–º–µ–Ω—å—à–∏—Ç–µ –º–∞—Å—à—Ç–∞–± –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–æ 75% –∏–ª–∏ 60%
–∏ –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –µ–≥–æ `clientWidth` –∏ –µ–≥–æ `getBoundingClientRect().width` —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è.

> <div data-diagram="getBoundingClientRect"></div>

–ù–∞ –º–æ–∏—Ö –º–∞—à–∏–Ω–∞—Ö —è –ø–æ–ª—É—á–∞—é —ç—Ç–∏ –ø–æ–∫–∞–∑–∞–Ω–∏—è

```
Windows 10, —É—Ä–æ–≤–µ–Ω—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è 75%, Chrome
clientWidth: 700
getBoundingClientRect().width = 700.0000610351562

MacOS, —É—Ä–æ–≤–µ–Ω—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è 90%, Chrome
clientWidth: 700
getBoundingClientRect().width = 700.0000610351562

MacOS, —É—Ä–æ–≤–µ–Ω—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è -1, Safari (safari –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è)
clientWidth: 700
getBoundingClientRect().width = 699.9999389648438

Firefox, –∏ Windows, –∏ MacOS –≤—Å–µ —É—Ä–æ–≤–Ω–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
clientWidth: 700
getBoundingClientRect().width = 700
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: Firefox –ø–æ–∫–∞–∑–∞–ª 700 –≤ —ç—Ç–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ, –Ω–æ –ø—Ä–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —è
–≤–∏–¥–µ–ª, —á—Ç–æ –æ–Ω –¥–∞–µ—Ç –Ω–µ—Ü–µ–ª—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ `getBoundingClientRect`, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–¥–µ–ª–∞–π—Ç–µ –æ–∫–Ω–æ
—Ç–æ–Ω–∫–∏–º, —á—Ç–æ–±—ã 100% canvas –±—ã–ª –º–µ–Ω—å—à–µ 700, –∏ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –Ω–µ—Ü–µ–ª—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–≤ Firefox.

–ò—Ç–∞–∫, —É—á–∏—Ç—ã–≤–∞—è —ç—Ç–æ, –º—ã –º–æ–≥–ª–∏ –±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `getBoundingClientRect`.

```js
function resizeCanvasToDisplaySize(canvas) {
  // –ò—â–µ–º —Ä–∞–∑–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—Ä–∞—É–∑–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç canvas –≤ CSS –ø–∏–∫—Å–µ–ª—è—Ö.
  const dpr = window.devicePixelRatio;
  const {width, height} = canvas.getBoundingClientRect();
  const displayWidth  = Math.round(width * dpr);
  const displayHeight = Math.round(height * dpr);

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ canvas —Ç–æ–≥–æ –∂–µ —Ä–∞–∑–º–µ—Ä–∞.
  const needResize = canvas.width  != displayWidth || 
                     canvas.height != displayHeight;

  if (needResize) {
    // –î–µ–ª–∞–µ–º canvas —Ç–æ–≥–æ –∂–µ —Ä–∞–∑–º–µ—Ä–∞
    canvas.width  = displayWidth;
    canvas.height = displayHeight;
  }

  return needResize;
}
```

–ò—Ç–∞–∫, –º—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏? –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ—Ç. –û–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ `canvas.getBoundingClientRect()` –º–æ–∂–µ—Ç
–Ω–µ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ—á–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä. –ü—Ä–∏—á–∏–Ω–∞ —Å–ª–æ–∂–Ω–∞—è, –Ω–æ –æ–Ω–∞ —Å–≤—è–∑–∞–Ω–∞ —Å
—Ç–µ–º, –∫–∞–∫ –±—Ä–∞—É–∑–µ—Ä —Ä–µ—à–∞–µ—Ç —Ä–∏—Å–æ–≤–∞—Ç—å –≤–µ—â–∏. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–∏ —Ä–µ—à–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ HTML,
–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–∏ —Ä–µ—à–∞—é—Ç—Å—è –ø–æ–∑–∂–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ "–∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä–∞" (—á–∞—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ä–∏—Å—É–µ—Ç).
`getBoundingClientRect()` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ HTML, –Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤–µ—â–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ,
—á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Ç–æ, –∫–∞–∫–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ canvas —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ä–∏—Å—É–µ—Ç—Å—è.

–Ø –¥—É–º–∞—é, –ø—Ä–∏–º–µ—Ä –≤ —Ç–æ–º, —á—Ç–æ HTML —á–∞—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–º, –∞ –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä
—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º. –ò—Ç–∞–∫, –¥–æ–ø—É—Å—Ç–∏–º, —É –≤–∞—Å –µ—Å—Ç—å –æ–∫–Ω–æ —à–∏—Ä–∏–Ω–æ–π 999 –ø–∏–∫—Å–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
–∏ devicePixelRatio 2.0. –í—ã –¥–µ–ª–∞–µ—Ç–µ –¥–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ —Ä—è–¥–æ–º, –∫–æ—Ç–æ—Ä—ã–µ
`width: 50%`. –ò—Ç–∞–∫, HTML –≤—ã—á–∏—Å–ª—è–µ—Ç, —á—Ç–æ –∫–∞–∂–¥—ã–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 499.5 –ø–∏–∫—Å–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –ù–æ –∫–æ–≥–¥–∞
—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤—Ä–µ–º—è —Ä–∏—Å–æ–≤–∞—Ç—å, –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä –Ω–µ –º–æ–∂–µ—Ç –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å 499.5 –ø–∏–∫—Å–µ–ª–µ–π, –ø–æ—ç—Ç–æ–º—É –æ–¥–∏–Ω
—ç–ª–µ–º–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç 499, –∞ –¥—Ä—É–≥–æ–π –ø–æ–ª—É—á–∞–µ—Ç 500. –ö–∞–∫–æ–π –ø–æ–ª—É—á–∞–µ—Ç –∏–ª–∏ —Ç–µ—Ä—è–µ—Ç –ø–∏–∫—Å–µ–ª—å,
–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –Ω–∏–∫–∞–∫–∏–º–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏.

–†–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–¥—É–º–∞–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤, - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
[`ResizeObserver` API](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver)
–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ `devicePixelContextBoxSize`
–∑–∞–ø–∏—Å–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç.
–û–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏–∫—Å–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è
`ContentBox`, –∞ –Ω–µ `ClientBox`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å
canvas —ç–ª–µ–º–µ–Ω—Ç–∞, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è *—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ* canvas, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∞ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç padding, –∫–∞–∫
`clientWidth`, `clientHeight` –∏ `getBoundingClientRect`, –ø—Ä–∏—è—Ç–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ.

–≠—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π. "–ö–æ–º–ø–æ–∑–∏—Ç–æ—Ä", —É–ø–æ–º—è–Ω—É—Ç—ã–π
–≤—ã—à–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –û–Ω –º–æ–∂–µ—Ç –≤—ã—è—Å–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∞ –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞–º —ç—Ç–æ—Ç —Ä–∞–∑–º–µ—Ä *–≤–Ω–µ –ø–æ–ª–æ—Å—ã*.

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ö–æ—Ç—è `ResizeObserver` –¥–æ—Å—Ç—É–ø–µ–Ω –≤–æ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö,
`devicePixelContentBoxSize` –ø–æ–∫–∞ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤ Chrome/Edge. –í–æ—Ç –∫–∞–∫
–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

–ú—ã —Å–æ–∑–¥–∞–µ–º `ResizeObserver` –∏ –ø–µ—Ä–µ–¥–∞–µ–º –µ–º—É —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≤—ã–∑–æ–≤–∞ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ –ª—é–±–æ–π —ç–ª–µ–º–µ–Ω—Ç,
–∫–æ—Ç–æ—Ä—ã–π –º—ã –Ω–∞–±–ª—é–¥–∞–µ–º, –∏–∑–º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –Ω–∞—à canvas.

```js
const resizeObserver = new ResizeObserver(onResize);
resizeObserver.observe(canvas, {box: 'content-box'});
```

–ö–æ–¥ –≤—ã—à–µ —Å–æ–∑–¥–∞–µ—Ç `ResizeObserver`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `onResize`
(–Ω–∏–∂–µ), –∫–æ–≥–¥–∞ —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º—ã –Ω–∞–±–ª—é–¥–∞–µ–º, –∏–∑–º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä. –ú—ã –≥–æ–≤–æ—Ä–∏–º –µ–º—É `observe` –Ω–∞—à
canvas. –ú—ã –≥–æ–≤–æ—Ä–∏–º –µ–º—É –Ω–∞–±–ª—é–¥–∞—Ç—å, –∫–æ–≥–¥–∞ `content-box` –∏–∑–º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä. –≠—Ç–æ
–≤–∞–∂–Ω–æ –∏ –Ω–µ–º–Ω–æ–≥–æ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ. –ú—ã –º–æ–≥–ª–∏ –±—ã –ø–æ–ø—Ä–æ—Å–∏—Ç—å –µ–≥–æ —Å–∫–∞–∑–∞—Ç—å –Ω–∞–º, –∫–æ–≥–¥–∞
`device-pixel-content-box` –∏–∑–º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä, –Ω–æ –¥–∞–≤–∞–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å canvas, –∫–æ—Ç–æ—Ä—ã–π
–∏–º–µ–µ—Ç –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞, –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ 100% –Ω–∞—à–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ —Å –ª–∏–Ω–∏–µ–π
–≤—ã—à–µ. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–∞—à canvas –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ç–æ –∂–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏–∫—Å–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —É—Ä–æ–≤–Ω—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è. –û–∫–Ω–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ —Ä–∞–∑–º–µ—Ä, –∫–æ–≥–¥–∞ –º—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ –µ—â–µ
—Ç–æ –∂–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏–∫—Å–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, `content-box` –±—É–¥–µ—Ç
–∏–∑–º–µ–Ω—è—Ç—å—Å—è, –∫–æ–≥–¥–∞ –º—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ CSS –ø–∏–∫—Å–µ–ª—è—Ö, –∏ –ø–æ—ç—Ç–æ–º—É, –∫–æ–≥–¥–∞ –º—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º, –±–æ–ª—å—à–µ –∏–ª–∏
–º–µ–Ω—å—à–µ CSS –ø–∏–∫—Å–µ–ª–µ–π –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏–∫—Å–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

–ï—Å–ª–∏ –Ω–∞—Å –Ω–µ –≤–æ–ª–Ω—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç–æ –º—ã –º–æ–≥–ª–∏ –±—ã –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–ª—é–¥–∞—Ç—å `device-pixel-content-box`.
–≠—Ç–æ –≤—ã–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É –º—ã —Å–¥–µ–ª–∞–ª–∏ –±—ã —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —ç—Ç–æ–≥–æ

```js
const resizeObserver = new ResizeObserver(onResize);
try {
  // –≤—ã–∑—ã–≤–∞—Ç—å –Ω–∞—Å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏–∫—Å–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
  resizeObserver.observe(canvas, {box: 'device-pixel-content-box'});
} catch (ex) {
  // device-pixel-content-box –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è –∫ —ç—Ç–æ–º—É
  resizeObserver.observe(canvas, {box: 'content-box'});
}
```

–§—É–Ω–∫—Ü–∏—è `onResize` –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ —Å –º–∞—Å—Å–∏–≤–æ–º [`ResizeObserverEntry`](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserverEntry). –û–¥–∏–Ω –¥–ª—è –∫–∞–∂–¥–æ–π –≤–µ—â–∏,
–∫–æ—Ç–æ—Ä–∞—è –∏–∑–º–µ–Ω–∏–ª–∞ —Ä–∞–∑–º–µ—Ä. –ú—ã –∑–∞–ø–∏—à–µ–º —Ä–∞–∑–º–µ—Ä –≤ –∫–∞—Ä—Ç—É, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª—å—à–µ —á–µ–º
–æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç.

```js
// –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å —Ä–∞–∑–º–µ—Ä–æ–º canvas –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
const canvasToDisplaySizeMap = new Map([[canvas, [300, 150]]]);

function onResize(entries) {
  for (const entry of entries) {
    let width;
    let height;
    let dpr = window.devicePixelRatio;
    if (entry.devicePixelContentBoxSize) {
      // –ü–†–ò–ú–ï–ß–ê–ù–ò–ï: –¢–æ–ª—å–∫–æ —ç—Ç–æ—Ç –ø—É—Ç—å –¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
      // –î—Ä—É–≥–∏–µ –ø—É—Ç–∏ - –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –æ—Ç–∫–∞—Ç—ã
      // –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –Ω–∏–∫–∞–∫–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ
      width = entry.devicePixelContentBoxSize[0].inlineSize;
      height = entry.devicePixelContentBoxSize[0].blockSize;
      dpr = 1; // —ç—Ç–æ —É–∂–µ –≤ width –∏ height
    } else if (entry.contentBoxSize) {
      if (entry.contentBoxSize[0]) {
        width = entry.contentBoxSize[0].inlineSize;
        height = entry.contentBoxSize[0].blockSize;
      } else {
        width = entry.contentBoxSize.inlineSize;
        height = entry.contentBoxSize.blockSize;
      }
    } else {
      width = entry.contentRect.width;
      height = entry.contentRect.height;
    }
    const displayWidth = Math.round(width * dpr);
    const displayHeight = Math.round(height * dpr);
    canvasToDisplaySizeMap.set(entry.target, [displayWidth, displayHeight]);
  }
}
```

–≠—Ç–æ —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞ –±–µ—Å–ø–æ—Ä—è–¥–æ–∫. –í—ã –º–æ–∂–µ—Ç–µ –≤–∏–¥–µ—Ç—å, —á—Ç–æ API –æ—Ç–ø—Ä–∞–≤–∏–ª –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ 3 —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
–ø–µ—Ä–µ–¥ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `devicePixelContentBoxSize` üòÇ

–¢–µ–ø–µ—Ä—å –º—ã –∏–∑–º–µ–Ω–∏–º –Ω–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é resize, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ

```js
function resizeCanvasToDisplaySize(canvas) {
  // –ü–æ–ª—É—á–∞–µ–º —Ä–∞–∑–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—Ä–∞—É–∑–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç canvas –≤ –ø–∏–∫—Å–µ–ª—è—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
 const [displayWidth, displayHeight] = canvasToDisplaySizeMap.get(canvas);

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ canvas —Ç–æ–≥–æ –∂–µ —Ä–∞–∑–º–µ—Ä–∞.
  const needResize = canvas.width  != displayWidth || 
                     canvas.height != displayHeight;

  if (needResize) {
    // –î–µ–ª–∞–µ–º canvas —Ç–æ–≥–æ –∂–µ —Ä–∞–∑–º–µ—Ä–∞
    canvas.width  = displayWidth;
    canvas.height = displayHeight;
  }

  return needResize;
}
```

–í–æ—Ç –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ–≥–æ –∫–æ–¥–∞

{{{example url="../webgl-resize-canvas-hd-dpi.html" }}}

–ú–æ–∂–µ—Ç –±—ã—Ç—å —Ç—Ä—É–¥–Ω–æ —É–≤–∏–¥–µ—Ç—å –∫–∞–∫—É—é-–ª–∏–±–æ —Ä–∞–∑–Ω–∏—Ü—É. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å HD-DPI –¥–∏—Å–ø–ª–µ–π,
–∫–∞–∫ –≤–∞—à —Å–º–∞—Ä—Ç—Ñ–æ–Ω –∏–ª–∏ –≤—Å–µ Mac —Å 2019 –≥–æ–¥–∞, –∏–ª–∏, –≤–æ–∑–º–æ–∂–Ω–æ, 4k –º–æ–Ω–∏—Ç–æ—Ä, —Ç–æ —ç—Ç–∞
–ª–∏–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ–Ω—å—à–µ, —á–µ–º –ª–∏–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞.

–í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—ã —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç–µ –º–∞—Å—à—Ç–∞–± (—è –ø—Ä–µ–¥–ª–∞–≥–∞—é –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–º–µ—Ä –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ), –∫–æ–≥–¥–∞ –≤—ã —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç–µ –º–∞—Å—à—Ç–∞–±,
–ª–∏–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —Ç–æ–≥–æ –∂–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, —Ç–æ–≥–¥–∞ –∫–∞–∫ –µ—Å–ª–∏ –≤—ã —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç–µ –º–∞—Å—à—Ç–∞–± –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ,
–ª–∏–Ω–∏—è —Å—Ç–∞–Ω–µ—Ç —Ç–æ–ª—â–µ –∏ —Å –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `devicePixelRatio`.

–ü—Ä–æ—Å—Ç–æ –∫–∞–∫ —Ç–µ—Å—Ç, –≤–æ—Ç –≤—Å–µ 3 –º–µ—Ç–æ–¥–∞ –≤—ã—à–µ, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–æ—Å—Ç–æ–π canvas 2d.
–ß—Ç–æ–±—ã –±—ã–ª–æ –ø—Ä–æ—Å—Ç–æ, –æ–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç WebGL. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Canvas 2D –∏ –¥–µ–ª–∞–µ—Ç 2 –ø–∞—Ç—Ç–µ—Ä–Ω–∞, 2x2 –ø–∏–∫—Å–µ–ª—å–Ω—ã–π –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —á–µ—Ä–Ω–æ-–±–µ–ª—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –∏ 2x2 –ø–∏–∫—Å–µ–ª—å–Ω—ã–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —á–µ—Ä–Ω–æ-–±–µ–ª—ã–π
–ø–∞—Ç—Ç–µ—Ä–Ω. –û–Ω —Ä–∏—Å—É–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω ‚ñ§ —Å–ª–µ–≤–∞ –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω ‚ñ•
—Å–ø—Ä–∞–≤–∞.

{{{example url="../webgl-resize-the-canvas-comparison.html"}}}

–ò–∑–º–µ–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ä —ç—Ç–æ–≥–æ –æ–∫–Ω–∞, –∏–ª–∏ –ª—É—á—à–µ, –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –∏ —É–º–µ–Ω—å—à–∞–π—Ç–µ –º–∞—Å—à—Ç–∞–±, –∏—Å–ø–æ–ª—å–∑—É—è
–∫–ª–∞–≤–∏—à–∏, —É–ø–æ–º—è–Ω—É—Ç—ã–µ –≤—ã—à–µ. –ù–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –∏ –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ,
—á—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–∏–∂–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö (–≤ Chrome/Edge). –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —á–µ–º –≤—ã—à–µ
`devicePixelRatio` –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —Ç–µ–º —Ç—Ä—É–¥–Ω–µ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–≤–∏–¥–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã. –ß—Ç–æ –≤—ã
–¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å - —ç—Ç–æ –Ω–µ–∏–∑–º–µ–Ω—è—é—â–∏–π—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω —Å–ª–µ–≤–∞ –∏ —Å–ø—Ä–∞–≤–∞. –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ —Ä–µ–∑–∫–∏–µ
–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ —Ä–∞–∑–ª–∏—á–∞—é—â—É—é—Å—è —Ç–µ–º–Ω–æ—Ç—É, –∫–∞–∫ –≥—Ä–∞–¥–∏–µ–Ω—Ç, —Ç–æ —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
–ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ Chrome/Edge, –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —ç—Ç–æ —Ç–∞–º, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.

–¢–∞–∫–∂–µ –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –û–° (MacOS) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –æ–ø—Ü–∏—é –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –û–°, –∫–æ—Ç–æ—Ä–∞—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º
—Å–∫—Ä—ã—Ç–∞ –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤—ã —É–≤–∏–¥–∏—Ç–µ –ª–µ–≥–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –≤ –Ω–∏–∂–Ω–µ–º –ø—Ä–∏–º–µ—Ä–µ
(–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è, —á—Ç–æ –≤—ã –≤ Chrome/Edge), –Ω–æ —ç—Ç–æ –±—É–¥–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω.

–≠—Ç–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É, —á—Ç–æ –Ω–µ—Ç —Ö–æ—Ä–æ—à–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö, –Ω–æ –Ω—É–∂–µ–Ω –ª–∏ –≤–∞–º
–Ω–∞—Å—Ç–æ—è—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ? –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ WebGL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–µ–ª–∞—é—Ç —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —Ä–∏—Å–æ–≤–∞–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–µ—â–µ–π –≤ 3D
—Å —Ç–µ–∫—Å—Ç—É—Ä–∞–º–∏ –∏/–∏–ª–∏ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –Ω–∞ –Ω–∏—Ö. –ö–∞–∫ —Ç–∞–∫–æ–≤—ã–µ, —á–∞—Å—Ç–æ –Ω–µ –∑–∞–º–µ—Ç–Ω–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏
–≤–µ—Ä—Ö–Ω–µ–µ —Ä–µ—à–µ–Ω–∏–µ, –≥–¥–µ –º—ã –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏ `devicePixelRatio`, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `clientWidth`, `clientHeight`
–∏–ª–∏ `getBoundingClientRect()` * `devicePixelRatio` –∏ –Ω–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –æ–± —ç—Ç–æ–º –¥–∞–ª—å—à–µ.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Å–ª–µ–ø–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `devicePixelRatio` –º–æ–∂–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–º–µ–¥–ª–∏—Ç—å –≤–∞—à—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
–ù–∞ iPhoneX –∏–ª–∏ iPhone11 <code>window.devicePixelRatio</code> —Ä–∞–≤–µ–Ω <code>3</code>, —á—Ç–æ
–æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –±—É–¥–µ—Ç–µ —Ä–∏—Å–æ–≤–∞—Ç—å –≤ 9 —Ä–∞–∑ –±–æ–ª—å—à–µ –ø–∏–∫—Å–µ–ª–µ–π. –ù–∞ Samsung Galaxy S8 —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ <code>4</code>, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –±—É–¥–µ—Ç–µ —Ä–∏—Å–æ–≤–∞—Ç—å
–≤ 16 —Ä–∞–∑ –±–æ–ª—å—à–µ –ø–∏–∫—Å–µ–ª–µ–π. –≠—Ç–æ –º–æ–∂–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–º–µ–¥–ª–∏—Ç—å –≤–∞—à—É –ø—Ä–æ–≥—Ä–∞–º–º—É. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏, —ç—Ç–æ –æ–±—ã—á–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤ –∏–≥—Ä–∞—Ö - —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å
–º–µ–Ω—å—à–µ –ø–∏–∫—Å–µ–ª–µ–π, —á–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –∏ –ø–æ–∑–≤–æ–ª–∏—Ç—å GPU –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤–≤–µ—Ä—Ö. –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π. –ï—Å–ª–∏ –≤—ã —Ä–∏—Å—É–µ—Ç–µ
–≥—Ä–∞—Ñ–∏–∫ –¥–ª—è –ø–µ—á–∞—Ç–∏, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ—Ç–µ—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å HD-DPI. –ï—Å–ª–∏ –≤—ã –¥–µ–ª–∞–µ—Ç–µ –∏–≥—Ä—É, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–µ —Ö–æ—Ç–µ—Ç—å –∏–ª–∏ –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ—Ç–µ—Ç—å –¥–∞—Ç—å
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –≤—ã–∫–ª—é—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É, –µ—Å–ª–∏ –∏—Ö —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–∞, —á—Ç–æ–±—ã —Ä–∏—Å–æ–≤–∞—Ç—å —Ç–∞–∫ –º–Ω–æ–≥–æ –ø–∏–∫—Å–µ–ª–µ–π.

–ï—â–µ –æ–¥–Ω–∞ –æ–≥–æ–≤–æ—Ä–∫–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –≤ —è–Ω–≤–∞—Ä–µ 2021 –≥–æ–¥–∞ `round(getBoundingClientRect * devicePixelRatio)` —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö **–ï–°–õ–ò –ò –¢–û–õ–¨–ö–û –ï–°–õ–ò** canvas –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π
—Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ —Å –ª–∏–Ω–∏–µ–π –≤—ã—à–µ. –í–æ—Ç –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

{{{example url="../webgl-resize-the-canvas-comparison-fullwindow.html"}}}

–í—ã –∑–∞–º–µ—Ç–∏—Ç–µ, —á—Ç–æ –µ—Å–ª–∏ –≤—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç–µ –∏ –∏–∑–º–µ–Ω—è–µ—Ç–µ —Ä–∞–∑–º–µ—Ä *—ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã*, —ç—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Å `getBoundingClientRect`.
–≠—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ canvas –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–Ω—ã–º –æ–∫–Ω–æ–º, –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ iframe. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–º–µ—Ä
–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ, –∏ —ç—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

–ö–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—Å. –î–ª—è –º–µ–Ω—è 99% –≤—Ä–µ–º–µ–Ω–∏ —è –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é
`devicePixelRatio`. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –º–æ–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–µ–¥–ª–µ–Ω–Ω—ã–º–∏, –∏ –∫—Ä–æ–º–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ
–ª—é–¥–µ–π –Ω–µ –∑–∞–º–µ—Ç—è—Ç —Ä–∞–∑–Ω–∏—Ü—ã. –ù–∞ —ç—Ç–æ–º —Å–∞–π—Ç–µ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏–∞–≥—Ä–∞–º–º, –≥–¥–µ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç.

–ï—Å–ª–∏ –≤—ã –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –º–Ω–æ–≥–∏–µ WebGL –ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ–Ω–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É —Ä–∞–∑–º–µ—Ä–∞ canvas –º–Ω–æ–≥–∏–º–∏ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏.
–Ø –¥—É–º–∞—é, —á—Ç–æ —Å–ø–æ—Ä–Ω–æ, —á—Ç–æ –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± - –ø–æ–∑–≤–æ–ª–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä—É –≤—ã–±—Ä–∞—Ç—å —Ä–∞–∑–º–µ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è canvas —Å –ø–æ–º–æ—â—å—é CSS, –∞ –∑–∞—Ç–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä –æ–Ω –≤—ã–±—Ä–∞–ª, –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å
–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏–∫—Å–µ–ª–µ–π –≤ canvas –≤ –æ—Ç–≤–µ—Ç.
–ï—Å–ª–∏ –≤–∞–º –ª—é–±–æ–ø—ã—Ç–Ω–æ, <a href="webgl-anti-patterns.html">–≤–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –ø—Ä–∏—á–∏–Ω</a>, –ø–æ –∫–æ—Ç–æ—Ä—ã–º —è –¥—É–º–∞—é, —á—Ç–æ –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤—ã—à–µ —Å–ø–æ—Å–æ–± —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–º.


<!-- –ø—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã —É—Å–ø–æ–∫–æ–∏—Ç—å —Å–±–æ—Ä–∫—É, —á—Ç–æ —ç—Ç–∞ —Å—Å—ã–ª–∫–∞ —Ä–∞–Ω—å—à–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞
     –∏ –≤—Å–µ –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Å—Ç–∞—Ä—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–∞—Ö -->
<a href="webgl-animation.html"></a>

<script type="module" src="resources/webgl-resizing-the-canvas.module.js"></script> 
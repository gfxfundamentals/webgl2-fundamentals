Title: WebGL2 3D –ì–µ–æ–º–µ—Ç—Ä–∏—è - –¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
Description: –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–∫–∞—Ä–Ω—É—é –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∏–∑ –∫—Ä–∏–≤–æ–π –ë–µ–∑—å–µ.
TOC: 3D –ì–µ–æ–º–µ—Ç—Ä–∏—è - –¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞


–≠—Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –¥–æ–≤–æ–ª—å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è —Ç–µ–º–∞, –Ω–æ —è –Ω–∞—à–µ–ª –µ—ë –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π, –ø–æ—ç—Ç–æ–º—É –ø–∏—à—É –æ–± —ç—Ç–æ–º.
–≠—Ç–æ –Ω–µ —Ç–æ, —á—Ç–æ —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –≤–∞–º –¥–µ–ª–∞—Ç—å –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ. –°–∫–æ—Ä–µ–µ, —è –¥—É–º–∞—é, —á—Ç–æ —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥
—ç—Ç–æ–π —Ç–µ–º–æ–π –ø–æ–º–æ–∂–µ—Ç –ø—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è 3D –º–æ–¥–µ–ª–µ–π –¥–ª—è WebGL.

–ö—Ç–æ-—Ç–æ —Å–ø—Ä–æ—Å–∏–ª, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Ñ–æ—Ä–º—É –∫–µ–≥–ª–∏ –¥–ª—è –±–æ—É–ª–∏–Ω–≥–∞ –≤ WebGL. *–£–º–Ω—ã–π* –æ—Ç–≤–µ—Ç:
"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 3D –ø–∞–∫–µ—Ç –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç–∞–∫–æ–π –∫–∞–∫ [Blender](https://blender.org),
[Maya](https://www.autodesk.com/products/maya/overview),
[3D Studio Max](https://www.autodesk.com/products/3ds-max/overview),
[Cinema 4D](https://www.maxon.net/en/products/cinema-4d/overview/), –∏ —Ç.–¥.
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–µ–≥–ª–∏, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ, –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ.
([–§–æ—Ä–º–∞—Ç OBJ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç](https://en.wikipedia.org/wiki/Wavefront_.obj_file)).

–ù–æ —ç—Ç–æ –∑–∞—Å—Ç–∞–≤–∏–ª–æ –º–µ–Ω—è –∑–∞–¥—É–º–∞—Ç—å—Å—è, –∞ —á—Ç–æ –µ—Å–ª–∏ –æ–Ω–∏ —Ö–æ—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—Ç—å –ø–∞–∫–µ—Ç –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è?

–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–¥–µ–π. –û–¥–Ω–∞ –∏–∑ –Ω–∏—Ö - —Å–æ–∑–¥–∞—Ç—å —Ü–∏–ª–∏–Ω–¥—Ä –∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–∂–∞—Ç—å –µ–≥–æ –≤
–Ω—É–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É—è —Å–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω—ã–µ –≤–æ–ª–Ω—ã, –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö. –ü—Ä–æ–±–ª–µ–º–∞
—Å —ç—Ç–æ–π –∏–¥–µ–µ–π –≤ —Ç–æ–º, —á—Ç–æ –≤—ã –Ω–µ –ø–æ–ª—É—á–∏—Ç–µ –≥–ª–∞–¥–∫—É—é –≤–µ—Ä—à–∏–Ω—É. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ü–∏–ª–∏–Ω–¥—Ä
–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ —Å–µ—Ä–∏—è —Ä–∞–≤–Ω–æ—É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∫–æ–ª–µ—Ü, –Ω–æ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –±–æ–ª—å—à–µ
–∫–æ–ª–µ—Ü —Ç–∞–º, –≥–¥–µ –≤–µ—â–∏ –±–æ–ª–µ–µ –∏–∑–æ–≥–Ω—É—Ç—ã.

–í –ø–∞–∫–µ—Ç–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã –±—ã —Å–æ–∑–¥–∞–ª–∏ –∫–µ–≥–ª—é, —Å–¥–µ–ª–∞–≤ 2D —Å–∏–ª—É—ç—Ç –∏–ª–∏, —Å–∫–æ—Ä–µ–µ,
–∏–∑–æ–≥–Ω—É—Ç—É—é –ª–∏–Ω–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫—Ä–∞—é 2D —Å–∏–ª—É—ç—Ç–∞. –ó–∞—Ç–µ–º –≤—ã –±—ã
–≤—ã—Ç–æ—á–∏–ª–∏ —ç—Ç–æ –≤ 3D —Ñ–æ—Ä–º—É. –ü–æ–¥ *—Ç–æ–∫–∞—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π* —è –∏–º–µ—é –≤ –≤–∏–¥—É, —á—Ç–æ –≤—ã –±—ã –≤—Ä–∞—â–∞–ª–∏
—ç—Ç–æ –≤–æ–∫—Ä—É–≥ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π –æ—Å–∏ –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏ –±—ã —Ç–æ—á–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å
–ª—é–±—ã–µ –∫—Ä—É–≥–ª—ã–µ –æ–±—ä–µ–∫—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ —á–∞—à–∞, —Å—Ç–∞–∫–∞–Ω, –±–µ–π—Å–±–æ–ª—å–Ω–∞—è –±–∏—Ç–∞, –±—É—Ç—ã–ª–∫–∏,
–ª–∞–º–ø–æ—á–∫–∏ –∏ —Ç.–¥.

–ò—Ç–∞–∫, –∫–∞–∫ –º—ã —ç—Ç–æ –¥–µ–ª–∞–µ–º? –ù—É, —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–º –Ω—É–∂–µ–Ω —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞—Ç—å –∫—Ä–∏–≤—É—é.
–ó–∞—Ç–µ–º –Ω–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã—á–∏—Å–ª–∏—Ç—å —Ç–æ—á–∫–∏ –Ω–∞ —ç—Ç–æ–π –∫—Ä–∏–≤–æ–π. –ú—ã –±—ã –∑–∞—Ç–µ–º –≤—Ä–∞—â–∞–ª–∏
—ç—Ç–∏ —Ç–æ—á–∫–∏ –≤–æ–∫—Ä—É–≥ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π –æ—Å–∏, –∏—Å–ø–æ–ª—å–∑—É—è [–º–∞—Ç—Ä–∏—á–Ω—É—é –º–∞—Ç–µ–º–∞—Ç–∏–∫—É](webgl-2d-matrices.html),
–∏ —Å—Ç—Ä–æ–∏–ª–∏ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ –∏–∑ —ç—Ç–∏—Ö —Ç–æ—á–µ–∫.

–°–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π –≤–∏–¥ –∫—Ä–∏–≤–æ–π –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–µ, –∫–∞–∂–µ—Ç—Å—è,
–∫—Ä–∏–≤–∞—è –ë–µ–∑—å–µ. –ï—Å–ª–∏ –≤—ã –∫–æ–≥–¥–∞-–ª–∏–±–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ –∫—Ä–∏–≤—É—é –≤
[Adobe Illustrator](https://www.adobe.com/products/illustrator.html) –∏–ª–∏
[Inkscape](https://inkscape.org/en/) –∏–ª–∏
[Affinity Designer](https://affinity.serif.com/en-us/designer/)
–∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö, —ç—Ç–æ –∫—Ä–∏–≤–∞—è –ë–µ–∑—å–µ.

–ö—Ä–∏–≤–∞—è –ë–µ–∑—å–µ, –∏–ª–∏ —Å–∫–æ—Ä–µ–µ –∫—É–±–∏—á–µ—Å–∫–∞—è –∫—Ä–∏–≤–∞—è –ë–µ–∑—å–µ, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è 4 —Ç–æ—á–∫–∞–º–∏.
2 —Ç–æ—á–∫–∏ - —ç—Ç–æ –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏. 2 —Ç–æ—á–∫–∏ - —ç—Ç–æ "–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏".

–í–æ—Ç 4 —Ç–æ—á–∫–∏

{{{diagram url="resources/bezier-curve-diagram.html?maxDepth=0" }}}

–ú—ã –≤—ã–±–∏—Ä–∞–µ–º —á–∏—Å–ª–æ –º–µ–∂–¥—É 0 –∏ 1 (–Ω–∞–∑—ã–≤–∞–µ–º–æ–µ `t`), –≥–¥–µ 0 = –Ω–∞—á–∞–ª–æ
–∏ 1 = –∫–æ–Ω–µ—Ü. –ó–∞—Ç–µ–º –º—ã –≤—ã—á–∏—Å–ª—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ç–æ—á–∫—É `t`
–º–µ–∂–¥—É –∫–∞–∂–¥–æ–π –ø–∞—Ä–æ–π —Ç–æ—á–µ–∫. `P1 P2`, `P2 P3`, `P3 P4`.

{{{diagram url="resources/bezier-curve-diagram.html?maxDepth=1" }}}

–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –µ—Å–ª–∏ `t = .25`, —Ç–æ –º—ã –≤—ã—á–∏—Å–ª—è–µ–º —Ç–æ—á–∫—É –Ω–∞ 25% –ø—É—Ç–∏
–æ—Ç `P1` –∫ `P2`, –µ—â–µ –æ–¥–Ω—É –Ω–∞ 25% –ø—É—Ç–∏ –æ—Ç `P2` –∫ `P3`
–∏ –µ—â–µ –æ–¥–Ω—É –Ω–∞ 25% –ø—É—Ç–∏ –æ—Ç `P3` –∫ `P4`.

–í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å –ø–æ–ª–∑—É–Ω–æ–∫, —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `t`, –∏ –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å —Ç–æ—á–∫–∏
`P1`, `P2`, `P3` –∏ `P4`.

–ú—ã –¥–µ–ª–∞–µ–º —Ç–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏—Ö —Ç–æ—á–µ–∫. –í—ã—á–∏—Å–ª—è–µ–º —Ç–æ—á–∫–∏ `t` –º–µ–∂–¥—É `Q1 Q2`
–∏ `Q2 Q3`.

{{{diagram url="resources/bezier-curve-diagram.html?maxDepth=2" }}}

–ù–∞–∫–æ–Ω–µ—Ü, –º—ã –¥–µ–ª–∞–µ–º —Ç–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è —ç—Ç–∏—Ö 2 —Ç–æ—á–µ–∫ –∏ –≤—ã—á–∏—Å–ª—è–µ–º —Ç–æ—á–∫—É `t` –º–µ–∂–¥—É
`R1 R2`.

{{{diagram url="resources/bezier-curve-diagram.html?maxDepth=3" }}}

–ü–æ–∑–∏—Ü–∏–∏ —ç—Ç–æ–π <span style="color: red;">–∫—Ä–∞—Å–Ω–æ–π —Ç–æ—á–∫–∏</span> –æ–±—Ä–∞–∑—É—é—Ç –∫—Ä–∏–≤—É—é.

{{{diagram url="resources/bezier-curve-diagram.html?maxDepth=4" }}}

–ò—Ç–∞–∫, —ç—Ç–æ –∫—É–±–∏—á–µ—Å–∫–∞—è –∫—Ä–∏–≤–∞—è –ë–µ–∑—å–µ.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ö–æ—Ç—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏ –≤—ã—à–µ –∏
–ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è 3 —Ç–æ—á–µ–∫ –∏–∑ 4, –∑–∞—Ç–µ–º 2 –∏–∑ 3, –∏ –Ω–∞–∫–æ–Ω–µ—Ü 1
—Ç–æ—á–∫–∏ –∏–∑ 2 —Ä–∞–±–æ—Ç–∞–µ—Ç, —ç—Ç–æ –Ω–µ –æ–±—ã—á–Ω—ã–π —Å–ø–æ—Å–æ–±. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∫—Ç–æ-—Ç–æ –ø–æ–¥—Å—Ç–∞–≤–∏–ª
–≤—Å—é –º–∞—Ç–µ–º–∞—Ç–∏–∫—É –∏ —É–ø—Ä–æ—Å—Ç–∏–ª –µ—ë –¥–æ —Ñ–æ—Ä–º—É–ª—ã, –ø–æ–¥–æ–±–Ω–æ–π —ç—Ç–æ–π

<div class="webgl_center">
<pre class="webgl_math">
invT = (1 - t)
P = P1 * invT^3 +
    P2 * 3 * t * invT^2 +
    P3 * 3 * invT * t^2 +
    P4 * t^3
</pre>
</div>

–ì–¥–µ `P1`, `P2`, `P3`, `P4` - —ç—Ç–æ —Ç–æ—á–∫–∏, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –≤—ã—à–µ, –∞ `P`
- —ç—Ç–æ <span style="color: red;">–∫—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞</span>.

–í 2D –ø—Ä–æ–≥—Ä–∞–º–º–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–∏, —Ç–∞–∫–æ–π –∫–∞–∫ Adobe Illustrator,
–∫–æ–≥–¥–∞ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—É—é –∫—Ä–∏–≤—É—é, –æ–Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö 4-—Ç–æ—á–µ—á–Ω—ã—Ö
–∫—Ä–∏–≤—ã—Ö, –ø–æ–¥–æ–±–Ω—ã—Ö —ç—Ç–æ–π. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –±–ª–æ–∫–∏—Ä—É—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏
–≤–æ–∫—Ä—É–≥ –æ–±—â–µ–π –Ω–∞—á–∞–ª—å–Ω–æ–π/–∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç, —á—Ç–æ–±—ã –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ –±—ã–ª–∏
–ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–±—â–µ–π —Ç–æ—á–∫–∏.

–°–º–æ—Ç—Ä–∏—Ç–µ —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ `P3` –∏–ª–∏ `P5`, –∏ –∫–æ–¥ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç –¥—Ä—É–≥–æ–π.

{{{diagram url="resources/bezier-curve-edit.html" }}}

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∫—Ä–∏–≤–∞—è, —Å–æ–∑–¥–∞–Ω–Ω–∞—è `P1,P2,P3,P4`, —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫—Ä–∏–≤–æ–π –æ—Ç
—Ç–æ–π, —á—Ç–æ —Å–æ–∑–¥–∞–Ω–∞ `P4,P5,P6,P7`. –ü—Ä–æ—Å—Ç–æ –∫–æ–≥–¥–∞ `P3` –∏ `P5` –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ —Ç–æ—á–Ω—ã—Ö
–ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö `P4`, –≤–º–µ—Å—Ç–µ –æ–Ω–∏ –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ –æ–¥–Ω–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∫—Ä–∏–≤–∞—è.
–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ–±—ã—á–Ω–æ –¥–∞—é—Ç –≤–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∏—Ö
–≤–º–µ—Å—Ç–µ, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –ø–æ–ª—É—á–∏—Ç—å –æ—Å—Ç—Ä—ã–π —É–≥–æ–ª. –°–Ω–∏–º–∏—Ç–µ —Ñ–ª–∞–∂–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏,
–∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ `P3` –∏–ª–∏ `P5`, –∏ —Å—Ç–∞–Ω–µ—Ç –µ—â–µ –±–æ–ª–µ–µ —è—Å–Ω–æ, —á—Ç–æ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è
–æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∫—Ä–∏–≤—ã–º–∏.

–î–∞–ª–µ–µ –Ω–∞–º –Ω—É–∂–µ–Ω —Å–ø–æ—Å–æ–± –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—á–∫–∏ –Ω–∞ –∫—Ä–∏–≤–æ–π.
–ò—Å–ø–æ–ª—å–∑—É—è —Ñ–æ—Ä–º—É–ª—É –≤—ã—à–µ, –º—ã –º–æ–∂–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—á–∫—É –¥–ª—è
–∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è `t`, –∫–∞–∫ —ç—Ç–æ.

    function getPointOnBezierCurve(points, offset, t) {
      const invT = (1 - t);
      return v2.add(v2.mult(points[offset + 0], invT * invT * invT),
                    v2.mult(points[offset + 1], 3 * t * invT * invT),
                    v2.mult(points[offset + 2], 3 * invT * t * t),
                    v2.mult(points[offset + 3], t * t  *t));
    }

–ò –º—ã –º–æ–∂–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–±–æ—Ä —Ç–æ—á–µ–∫ –¥–ª—è –∫—Ä–∏–≤–æ–π, –∫–∞–∫ —ç—Ç–æ

    function getPointsOnBezierCurve(points, offset, numPoints) {
      const cpoints = [];
      for (let i = 0; i < numPoints; ++i) {
        const t = i / (numPoints - 1);
        cpoints.push(getPointOnBezierCurve(points, offset, t));
      }
      return cpoints;
    }

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: `v2.mult` –∏ `v2.add` - —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∏–µ JavaScript —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —è –≤–∫–ª—é—á–∏–ª
–¥–ª—è –ø–æ–º–æ—â–∏ –≤ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Å —Ç–æ—á–∫–∞–º–∏.

{{{diagram url="resources/bezier-curve-diagram.html?maxDepth=0&showCurve=true&showPoints=true" }}}

–í –¥–∏–∞–≥—Ä–∞–º–º–µ –≤—ã—à–µ –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫. –ï—Å–ª–∏ –∫—Ä–∏–≤–∞—è –æ—Å—Ç—Ä–∞—è,
–≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –±–æ–ª—å—à–µ —Ç–æ—á–µ–∫. –ï—Å–ª–∏ –∫—Ä–∏–≤–∞—è –ø–æ—á—Ç–∏ –ø—Ä—è–º–∞—è –ª–∏–Ω–∏—è, —Ç–æ
–≤–∞–º, –≤–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –º–µ–Ω—å—à–µ —Ç–æ—á–µ–∫. –û–¥–Ω–æ —Ä–µ—à–µ–Ω–∏–µ
- –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞—Å–∫–æ–ª—å–∫–æ –∏–∑–æ–≥–Ω—É—Ç–∞ –∫—Ä–∏–≤–∞—è. –ï—Å–ª–∏ –æ–Ω–∞ —Å–ª–∏—à–∫–æ–º –∏–∑–æ–≥–Ω—É—Ç–∞, —Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –µ—ë –Ω–∞
2 –∫—Ä–∏–≤—ã–µ.

–ß–∞—Å—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ª–µ–≥–∫–æ–π. –ï—Å–ª–∏ –º—ã –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ
—É—Ä–æ–≤–Ω–∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ —Å–Ω–æ–≤–∞, —Ç–æ—á–∫–∏ `P1`, `Q1`, `R1`, –ö–†–ê–°–ù–ê–Ø –æ–±—Ä–∞–∑—É—é—Ç –æ–¥–Ω—É
–∫—Ä–∏–≤—É—é, –∞ —Ç–æ—á–∫–∏ –ö–†–ê–°–ù–ê–Ø, `R2`, `Q3`, `P4` –æ–±—Ä–∞–∑—É—é—Ç –¥—Ä—É–≥—É—é –¥–ª—è –ª—é–±–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è t.
–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –º—ã –º–æ–∂–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∫—Ä–∏–≤—É—é –≥–¥–µ —É–≥–æ–¥–Ω–æ –∏ –ø–æ–ª—É—á–∏—Ç—å 2 –∫—Ä–∏–≤—ã–µ,
–∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—É.

{{{diagram url="resources/bezier-curve-diagram.html?maxDepth=4&show2Curves=true" }}}

–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å - —Ä–µ—à–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ —Ä–∞–∑–¥–µ–ª—è—Ç—å –∫—Ä–∏–≤—É—é –∏–ª–∏ –Ω–µ—Ç. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—è
–∏–Ω—Ç–µ—Ä–Ω–µ—Ç, —è –Ω–∞—à–µ–ª [—ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é](https://seant23.wordpress.com/2010/11/12/offset-bezier-curves/),
–∫–æ—Ç–æ—Ä–∞—è –¥–ª—è –¥–∞–Ω–Ω–æ–π –∫—Ä–∏–≤–æ–π —Ä–µ—à–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω–∞ –ø–ª–æ—Å–∫–∞—è.

    function flatness(points, offset) {
      const p1 = points[offset + 0];
      const p2 = points[offset + 1];
      const p3 = points[offset + 2];
      const p4 = points[offset + 3];

      let ux = 3 * p2[0] - 2 * p1[0] - p4[0]; ux *= ux;
      let uy = 3 * p2[1] - 2 * p1[1] - p4[1]; uy *= uy;
      let vx = 3 * p3[0] - 2 * p4[0] - p1[0]; vx *= vx;
      let vy = 3 * p3[1] - 2 * p4[1] - p1[1]; vy *= vy;

      if(ux < vx) {
        ux = vx;
      }

      if(uy < vy) {
        uy = vy;
      }

      return ux + uy;
    }

–ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –≤ –Ω–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ—á–∫–∏ –¥–ª—è –∫—Ä–∏–≤–æ–π.
–°–Ω–∞—á–∞–ª–∞ –º—ã –ø—Ä–æ–≤–µ—Ä–∏–º, –Ω–µ —Å–ª–∏—à–∫–æ–º –ª–∏ –∏–∑–æ–≥–Ω—É—Ç–∞ –∫—Ä–∏–≤–∞—è. –ï—Å–ª–∏ –¥–∞, —Ç–æ —Ä–∞–∑–¥–µ–ª–∏–º,
–µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –¥–æ–±–∞–≤–∏–º —Ç–æ—á–∫–∏.

    function getPointsOnBezierCurveWithSplitting(points, offset, tolerance, newPoints) {
      const outPoints = newPoints || [];
      if (flatness(points, offset) < tolerance) {

        // –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ —ç—Ç–æ–π –∫—Ä–∏–≤–æ–π
        outPoints.push(points[offset + 0]);
        outPoints.push(points[offset + 3]);

      } else {

        // —Ä–∞–∑–¥–µ–ª—è–µ–º
        const t = .5;
        const p1 = points[offset + 0];
        const p2 = points[offset + 1];
        const p3 = points[offset + 2];
        const p4 = points[offset + 3];

        const q1 = v2.lerp(p1, p2, t);
        const q2 = v2.lerp(p2, p3, t);
        const q3 = v2.lerp(p3, p4, t);

        const r1 = v2.lerp(q1, q2, t);
        const r2 = v2.lerp(q2, q3, t);

        const red = v2.lerp(r1, r2, t);

        // –¥–µ–ª–∞–µ–º –ø–µ—Ä–≤—É—é –ø–æ–ª–æ–≤–∏–Ω—É
        getPointsOnBezierCurveWithSplitting([p1, q1, r1, red], 0, tolerance, outPoints);
        // –¥–µ–ª–∞–µ–º –≤—Ç–æ—Ä—É—é –ø–æ–ª–æ–≤–∏–Ω—É
        getPointsOnBezierCurveWithSplitting([red, r2, q3, p4], 0, tolerance, outPoints);

      }
      return outPoints;
    }

{{{diagram url="resources/bezier-curve-diagram.html?maxDepth=0&showCurve=true&showTolerance=true" }}}

–≠—Ç–æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ—á–µ–∫, –Ω–æ
–æ–Ω –Ω–µ —Ç–∞–∫ —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ç–æ—á–µ–∫.

–î–ª—è —ç—Ç–æ–≥–æ –º—ã –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ [–∞–ª–≥–æ—Ä–∏—Ç–º—É –†–∞–º–µ—Ä–∞-–î—É–≥–ª–∞—Å–∞-–ü–µ–∫–µ—Ä–∞](https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm),
–∫–æ—Ç–æ—Ä—ã–π —è –Ω–∞—à–µ–ª –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.

–í —ç—Ç–æ–º –∞–ª–≥–æ—Ä–∏—Ç–º–µ –º—ã –±–µ—Ä–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫.
–ú—ã –Ω–∞—Ö–æ–¥–∏–º —Å–∞–º—É—é –¥–∞–ª—å–Ω—é—é —Ç–æ—á–∫—É –æ—Ç –ª–∏–Ω–∏–∏, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–æ–π 2 –∫–æ–Ω–µ—á–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏.
–ó–∞—Ç–µ–º –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —ç—Ç–∞ —Ç–æ—á–∫–∞ –¥–∞–ª—å—à–µ –æ—Ç –ª–∏–Ω–∏–∏, —á–µ–º –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ.
–ï—Å–ª–∏ –æ–Ω–∞ –º–µ–Ω—å—à–µ —ç—Ç–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è, –º—ã –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤–ª—è–µ–º 2 –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ –∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ.
–í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º —Å–Ω–æ–≤–∞, –æ–¥–∏–Ω —Ä–∞–∑ —Å —Ç–æ—á–∫–∞–º–∏ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ —Å–∞–º–æ–π –¥–∞–ª—å–Ω–µ–π
—Ç–æ—á–∫–∏ –∏ —Å–Ω–æ–≤–∞ –æ—Ç —Å–∞–º–æ–π –¥–∞–ª—å–Ω–µ–π —Ç–æ—á–∫–∏ –¥–æ –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏.

    function simplifyPoints(points, start, end, epsilon, newPoints) {
      const outPoints = newPoints || [];

      // –Ω–∞—Ö–æ–¥–∏–º —Å–∞–º—É—é –¥–∞–ª—å–Ω—é—é —Ç–æ—á–∫—É –æ—Ç –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫
      const s = points[start];
      const e = points[end - 1];
      let maxDistSq = 0;
      let maxNdx = 1;
      for (let i = start + 1; i < end - 1; ++i) {
        const distSq = v2.distanceToSegmentSq(points[i], s, e);
        if (distSq > maxDistSq) {
          maxDistSq = distSq;
          maxNdx = i;
        }
      }

      // –µ—Å–ª–∏ —ç—Ç–∞ —Ç–æ—á–∫–∞ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ
      if (Math.sqrt(maxDistSq) > epsilon) {

        // —Ä–∞–∑–¥–µ–ª—è–µ–º
        simplifyPoints(points, start, maxNdx + 1, epsilon, outPoints);
        simplifyPoints(points, maxNdx, end, epsilon, outPoints);

      } else {

        // –¥–æ–±–∞–≤–ª—è–µ–º 2 –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏
        outPoints.push(s, e);
      }

      return outPoints;
    }

`v2.distanceToSegmentSq` - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—á–∏—Å–ª—è–µ—Ç –∫–≤–∞–¥—Ä–∞—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç —Ç–æ—á–∫–∏
–¥–æ –æ—Ç—Ä–µ–∑–∫–∞ –ª–∏–Ω–∏–∏. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–≤–∞–¥—Ä–∞—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –µ–≥–æ –±—ã—Å—Ç—Ä–µ–µ –≤—ã—á–∏—Å–ª—è—Ç—å, —á–µ–º
—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ. –ü–æ—Å–∫–æ–ª—å–∫—É –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, –∫–∞–∫–∞—è —Ç–æ—á–∫–∞ —Å–∞–º–∞—è –¥–∞–ª—å–Ω—è—è, –∫–≤–∞–¥—Ä–∞—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
–±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫ –∂–µ —Ö–æ—Ä–æ—à–æ, –∫–∞–∫ –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ.

–í–æ—Ç —ç—Ç–æ –≤ –¥–µ–π—Å—Ç–≤–∏–∏. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –±–æ–ª—å—à–µ —Ç–æ—á–µ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∏–ª–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö.

{{{diagram url="resources/bezier-curve-diagram.html?maxDepth=0&showCurve=true&showDistance=true" }}}

–í–µ—Ä–Ω–µ–º—Å—è –∫ –Ω–∞—à–µ–π –∫–µ–≥–ª–µ. –ú—ã –º–æ–≥–ª–∏ –±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∫–æ–¥ –≤—ã—à–µ –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä.
–ï–º—É –Ω—É–∂–Ω–æ –±—ã–ª–æ –±—ã —É–º–µ—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Ç–æ—á–∫–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏.
–ï–º—É –ø–æ–Ω–∞–¥–æ–±–∏–ª—Å—è –±—ã –æ—Ç–∫–∞—Ç –∏ —Ç.–¥... –ù–æ –µ—Å—Ç—å –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±. –ú—ã –º–æ–∂–µ–º –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π –∏–∑
–æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤, —É–ø–æ–º—è–Ω—É—Ç—ã—Ö –≤—ã—à–µ. [–Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —ç—Ç–æ—Ç –æ–Ω–ª–∞–π–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä](https://svg-edit.github.io/svgedit/).

–í–æ—Ç SVG —Å–∏–ª—É—ç—Ç –∫–µ–≥–ª–∏, –∫–æ—Ç–æ—Ä—ã–π —è —Å–¥–µ–ª–∞–ª.

<img class="webgl_center" src="resources/bowling-pin-silhouette.svg" width="400" />

–û–Ω —Å–¥–µ–ª–∞–Ω –∏–∑ 4 –∫—Ä–∏–≤—ã—Ö –ë–µ–∑—å–µ. –î–∞–Ω–Ω—ã–µ –¥–ª—è —ç—Ç–æ–≥–æ –ø—É—Ç–∏ –≤—ã–≥–ª—è–¥—è—Ç —Ç–∞–∫

    <path fill="none" stroke-width="5" d="
       m44,434
       c18,-33 19,-66 15,-111
       c-4,-45 -37,-104 -39,-132
       c-2,-28 11,-51 16,-81
       c5,-30 3,-63 -36,-63
    "/>

[–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É—è —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ](https://developer.mozilla.org/en/docs/Web/SVG/Tutorial/Paths), –º—ã –ø–æ–ª—É—á–∞–µ–º —ç—Ç–∏ —Ç–æ—á–∫–∏.

            ___
    44, 371,   |
    62, 338,   | 1-—è –∫—Ä–∏–≤–∞—è
    63, 305,___|__
    59, 260,___|  |
    55, 215,      | 2-—è –∫—Ä–∏–≤–∞—è
    22, 156,______|__
    20, 128,______|  |
    18, 100,         | 3-—è –∫—Ä–∏–≤–∞—è
    31,  77,_________|__
    36,  47,_________|  |
    41,  17,            | 4-—è –∫—Ä–∏–≤–∞—è
    39, -16,            |
     0, -16,____________|

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫—Ä–∏–≤—ã—Ö, –Ω–∞–º –Ω—É–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–æ—á–∫–∏
–Ω–∞ –Ω–∏—Ö.

    // –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ—á–∫–∏ –ø–æ –≤—Å–µ–º —Å–µ–≥–º–µ–Ω—Ç–∞–º
    function getPointsOnBezierCurves(points, tolerance) {
      const newPoints = [];
      const numSegments = (points.length - 1) / 3;
      for (let i = 0; i < numSegments; ++i) {
        const offset = i * 3;
        getPointsOnBezierCurveWithSplitting(points, offset, tolerance, newPoints);
      }
      return newPoints;
    }

–ú—ã –±—ã –≤—ã–∑–≤–∞–ª–∏ `simplifyPoints` –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –≤—Ä–∞—â–∞—Ç—å –∏—Ö. –ú—ã —Ä–µ—à–∞–µ–º, —Å–∫–æ–ª—å–∫–æ –¥–µ–ª–µ–Ω–∏–π —Å–¥–µ–ª–∞—Ç—å, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è
–≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ [–º–∞—Ç—Ä–∏—á–Ω—É—é –º–∞—Ç–µ–º–∞—Ç–∏–∫—É](webgl-2d-matrices.html) –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è —Ç–æ—á–µ–∫ –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y.
–ö–∞–∫ —Ç–æ–ª—å–∫–æ –º—ã —Å–æ–∑–¥–∞–ª–∏ –≤—Å–µ —Ç–æ—á–∫–∏, –º—ã —Å–æ–µ–¥–∏–Ω—è–µ–º –∏—Ö —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è –∏–Ω–¥–µ–∫—Å—ã.

    // –≤—Ä–∞—â–∞–µ—Ç –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y.
    function lathePoints(points,
                         startAngle,   // —É–≥–æ–ª –¥–ª—è –Ω–∞—á–∞–ª–∞ (—Ç.–µ. 0)
                         endAngle,     // —É–≥–æ–ª –¥–ª—è –æ–∫–æ–Ω—á–∞–Ω–∏—è (—Ç.–µ. Math.PI * 2)
                         numDivisions, // —Å–∫–æ–ª—å–∫–æ —á–µ—Ç—ã—Ä–µ—Ö—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ —Å–¥–µ–ª–∞—Ç—å –≤–æ–∫—Ä—É–≥
                         capStart,     // true –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –Ω–∞—á–∞–ª–∞
                         capEnd) {     // true –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –∫–æ–Ω—Ü–∞
      const positions = [];
      const texcoords = [];
      const indices = [];

      const vOffset = capStart ? 1 : 0;
      const pointsPerColumn = points.length + vOffset + (capEnd ? 1 : 0);
      const quadsDown = pointsPerColumn - 1;

      // –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ—á–∫–∏
      for (let division = 0; division <= numDivisions; ++division) {
        const u = division / numDivisions;
        const angle = lerp(startAngle, endAngle, u) % (Math.PI * 2);
        const mat = m4.yRotation(angle);
        if (capStart) {
          // –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫—É –Ω–∞ –æ—Å–∏ Y –≤ –Ω–∞—á–∞–ª–µ
          positions.push(0, points[0][1], 0);
          texcoords.push(u, 0);
        }
        points.forEach((p, ndx) => {
          const tp = m4.transformPoint(mat, [...p, 0]);
          positions.push(tp[0], tp[1], tp[2]);
          const v = (ndx + vOffset) / quadsDown;
          texcoords.push(u, v);
        });
        if (capEnd) {
          // –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫—É –Ω–∞ –æ—Å–∏ Y –≤ –∫–æ–Ω—Ü–µ
          positions.push(0, points[points.length - 1][1], 0);
          texcoords.push(u, 1);
        }
      }

      // –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–Ω–¥–µ–∫—Å—ã
      for (let division = 0; division < numDivisions; ++division) {
        const column1Offset = division * pointsPerColumn;
        const column2Offset = column1Offset + pointsPerColumn;
        for (let quad = 0; quad < quadsDown; ++quad) {
          indices.push(column1Offset + quad, column2Offset + quad, column1Offset + quad + 1);
          indices.push(column1Offset + quad + 1, column2Offset + quad, column2Offset + quad + 1);
        }
      }

      return {
        position: positions,
        texcoord: texcoords,
        indices: indices,
      };
    }

–ö–æ–¥ –≤—ã—à–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ç–µ–∫—Å—Ç—É—Ä–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –∑–∞—Ç–µ–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤
–∏–∑ –Ω–∏—Ö. `capStart` –∏ `capEnd` —É–∫–∞–∑—ã–≤–∞—é—Ç, –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–∏ —Ç–æ—á–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ,
—á—Ç–æ –º—ã –¥–µ–ª–∞–µ–º –±–∞–Ω–∫—É. –≠—Ç–∏ –æ–ø—Ü–∏–∏ —É–∫–∞–∑—ã–≤–∞–ª–∏ –±—ã, –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ª–∏ –∫–æ–Ω—Ü—ã.

–ò—Å–ø–æ–ª—å–∑—É—è –Ω–∞—à [—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∫–æ–¥](webgl-less-code-more-fun.html), –º—ã –º–æ–∂–µ–º –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å WebGL –±—É—Ñ–µ—Ä—ã —Å
—ç—Ç–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –∫–∞–∫ —ç—Ç–æ

    const tolerance = 0.15;
    const distance = .4;
    const divisions = 16;
    const startAngle = 0;
    const endAngle = Math.PI * 2;
    const capStart = true;
    const capEnd = true;

    const tempPoints = getPointsOnBezierCurves(curvePoints, tolerance);
    const points = simplifyPoints(tempPoints, 0, tempPoints.length, distance);
    const arrays = lathePoints(points, startAngle, endAngle, divisions, capStart, capEnd);
    const extents = getExtents(arrays.position);
    if (!bufferInfo) {
      bufferInfo = webglUtils.createBufferInfoFromArrays(gl, arrays);

–í–æ—Ç –ø—Ä–∏–º–µ—Ä

{{{example url="../webgl-3d-lathe-step-01.html" }}}

–ü–æ–∏–≥—Ä–∞–π—Ç–µ —Å –ø–æ–ª–∑—É–Ω–∫–∞–º–∏, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–û–¥–Ω–∞–∫–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞. –í–∫–ª—é—á–∏—Ç–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏, –∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ —Ç–µ–∫—Å—Ç—É—Ä–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ.
–≠—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –º—ã –æ—Å–Ω–æ–≤–∞–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É `v` –Ω–∞ –∏–Ω–¥–µ–∫—Å–µ —Ç–æ—á–µ–∫ –Ω–∞ –ª–∏–Ω–∏–∏. –ï—Å–ª–∏ –±—ã –æ–Ω–∏ –±—ã–ª–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã,
—ç—Ç–æ –º–æ–≥–ª–æ –±—ã —Ä–∞–±–æ—Ç–∞—Ç—å. –ù–æ –æ–Ω–∏ –Ω–µ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã, –ø–æ—ç—Ç–æ–º—É –Ω–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ.

–ú—ã –º–æ–∂–µ–º –ø—Ä–æ–π—Ç–∏ –ø–æ —Ç–æ—á–∫–∞–º –∏ –≤—ã—á–∏—Å–ª–∏—Ç—å –æ–±—â—É—é –¥–ª–∏–Ω—É –∫—Ä–∏–≤–æ–π –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏
–Ω–∞ —ç—Ç–æ–π –∫—Ä–∏–≤–æ–π. –ó–∞—Ç–µ–º –º—ã –º–æ–∂–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–ª–∏–Ω—É –∏ –ø–æ–ª—É—á–∏—Ç—å –ª—É—á—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
–¥–ª—è `v`.

    // –≤—Ä–∞—â–∞–µ—Ç –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y.
    function lathePoints(points,
                         startAngle,   // —É–≥–æ–ª –¥–ª—è –Ω–∞—á–∞–ª–∞ (—Ç.–µ. 0)
                         endAngle,     // —É–≥–æ–ª –¥–ª—è –æ–∫–æ–Ω—á–∞–Ω–∏—è (—Ç.–µ. Math.PI * 2)
                         numDivisions, // —Å–∫–æ–ª—å–∫–æ —á–µ—Ç—ã—Ä–µ—Ö—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ —Å–¥–µ–ª–∞—Ç—å –≤–æ–∫—Ä—É–≥
                         capStart,     // true –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –≤–µ—Ä—Ö–∞
                         capEnd) {     // true –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –Ω–∏–∑–∞
      const positions = [];
      const texcoords = [];
      const indices = [];

      const vOffset = capStart ? 1 : 0;
      const pointsPerColumn = points.length + vOffset + (capEnd ? 1 : 0);
      const quadsDown = pointsPerColumn - 1;

    +  // –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º v –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
    +  let vcoords = [];
    +
    +  // —Å–Ω–∞—á–∞–ª–∞ –≤—ã—á–∏—Å–ª—è–µ–º –¥–ª–∏–Ω—É —Ç–æ—á–µ–∫
    +  let length = 0;
    +  for (let i = 0; i < points.length - 1; ++i) {
    +    vcoords.push(length);
    +    length += v2.distance(points[i], points[i + 1]);
    +  }
    +  vcoords.push(length);  // –ø–æ—Å–ª–µ–¥–Ω—è—è —Ç–æ—á–∫–∞
    +
    +  // —Ç–µ–ø–µ—Ä—å –¥–µ–ª–∏–º –∫–∞–∂–¥—É—é –Ω–∞ –æ–±—â—É—é –¥–ª–∏–Ω—É;
    +  vcoords = vcoords.map(v => v / length);

      // –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ—á–∫–∏
      for (let division = 0; division <= numDivisions; ++division) {
        const u = division / numDivisions;
        const angle = lerp(startAngle, endAngle, u) % (Math.PI * 2);
        const mat = m4.yRotation(angle);
        if (capStart) {
          // –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫—É –Ω–∞ –æ—Å–∏ Y –≤ –Ω–∞—á–∞–ª–µ
          positions.push(0, points[0][1], 0);
          texcoords.push(u, 0);
        }
        points.forEach((p, ndx) => {
          const tp = m4.transformPoint(mat, [...p, 0]);
          positions.push(tp[0], tp[1], tp[2]);
    *      texcoords.push(u, vcoords[ndx]);
        });
        if (capEnd) {
          // –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫—É –Ω–∞ –æ—Å–∏ Y –≤ –∫–æ–Ω—Ü–µ
          positions.push(0, points[points.length - 1][1], 0);
          texcoords.push(u, 1);
        }
      }

      // –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–Ω–¥–µ–∫—Å—ã
      for (let division = 0; division < numDivisions; ++division) {
        const column1Offset = division * pointsPerColumn;
        const column2Offset = column1Offset + pointsPerColumn;
        for (let quad = 0; quad < quadsDown; ++quad) {
          indices.push(column1Offset + quad, column1Offset + quad + 1, column2Offset + quad);
          indices.push(column1Offset + quad + 1, column2Offset + quad + 1, column2Offset + quad);
        }
      }

      return {
        position: positions,
        texcoord: texcoords,
        indices: indices,
      };
    }

–ò –≤–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

{{{example url="../webgl-3d-lathe-step-02.html" }}}

–≠—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–µ–∫—Å—Ç—É—Ä—ã –≤—Å–µ –µ—â–µ –Ω–µ –∏–¥–µ–∞–ª—å–Ω—ã. –ú—ã –Ω–µ —Ä–µ—à–∏–ª–∏, —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–ª—è –∫—Ä—ã—à–µ–∫.
–≠—Ç–æ –µ—â–µ –æ–¥–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞, –ø–æ—á–µ–º—É –≤—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è. –ú—ã –º–æ–≥–ª–∏ –±—ã –ø—Ä–∏–¥—É–º–∞—Ç—å
—Ä–∞–∑–Ω—ã–µ –∏–¥–µ–∏ –æ —Ç–æ–º, –∫–∞–∫ –≤—ã—á–∏—Å–ª—è—Ç—å uv –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –∫—Ä—ã—à–µ–∫, –Ω–æ –æ–Ω–∏, –≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–µ –±—É–¥—É—Ç
–æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω—ã–º–∏. –ï—Å–ª–∏ –≤—ã [–ø–æ–≥—É–≥–ª–∏—Ç–µ "UV map a barrel"](https://www.google.com/search?q=uv+map+a+barrel),
–≤—ã —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–¥–µ–∞–ª—å–Ω—ã—Ö UV –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç - —ç—Ç–æ –Ω–µ —Å—Ç–æ–ª—å–∫–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞, —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö,
–∏ –≤–∞–º –Ω—É–∂–Ω—ã —Ö–æ—Ä–æ—à–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≤–≤–æ–¥–∞ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

–ï—Å—Ç—å –µ—â–µ –æ–¥–Ω–∞ –≤–µ—â—å, –∫–æ—Ç–æ—Ä—É—é –º—ã –¥–æ–ª–∂–Ω—ã —Å–¥–µ–ª–∞—Ç—å, –∏ —ç—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ—Ä–º–∞–ª–∏.

–ú—ã –º–æ–≥–ª–∏ –±—ã –≤—ã—á–∏—Å–ª–∏—Ç—å –Ω–æ—Ä–º–∞–ª—å –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ –Ω–∞ –∫—Ä–∏–≤–æ–π. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –≤—ã –≤–µ—Ä–Ω–µ—Ç–µ—Å—å –∫ –ø—Ä–∏–º–µ—Ä–∞–º
–Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –ª–∏–Ω–∏—è, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–∞—è `R1` –∏ `R2`, —è–≤–ª—è–µ—Ç—Å—è –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π –∫ –∫—Ä–∏–≤–æ–π.

<img class="webgl_center" src="resources/tangent-to-curve.png" width="400" />

–ù–æ—Ä–º–∞–ª—å –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–∞ –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π, –ø–æ—ç—Ç–æ–º—É –±—ã–ª–æ –±—ã –ª–µ–≥–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å–∞—Ç–µ–ª—å–Ω—ã–µ
–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ—Ä–º–∞–ª–µ–π.

–ù–æ –¥–∞–≤–∞–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ –º—ã —Ö–æ—Ç–µ–ª–∏ —Å–¥–µ–ª–∞—Ç—å –ø–æ–¥—Å–≤–µ—á–Ω–∏–∫ —Å —Å–∏–ª—É—ç—Ç–æ–º, –∫–∞–∫ —ç—Ç–æ—Ç

<img class="webgl_center" src="resources/candle-holder.svg" width="400" />

–ï—Å—Ç—å –º–Ω–æ–≥–æ –≥–ª–∞–¥–∫–∏—Ö –æ–±–ª–∞—Å—Ç–µ–π, –Ω–æ —Ç–∞–∫–∂–µ –º–Ω–æ–≥–æ –æ—Å—Ç—Ä—ã—Ö —É–≥–ª–æ–≤. –ö–∞–∫ –º—ã —Ä–µ—à–∞–µ–º, –∫–∞–∫–∏–µ –Ω–æ—Ä–º–∞–ª–∏
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å? –•—É–∂–µ —Ç–æ–≥–æ, –∫–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º –æ—Å—Ç—Ä—ã–π –∫—Ä–∞–π, –Ω–∞–º –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Ä—à–∏–Ω—ã. –ü–æ—Ç–æ–º—É —á—Ç–æ –≤–µ—Ä—à–∏–Ω—ã
–∏–º–µ—é—Ç –∫–∞–∫ –ø–æ–∑–∏—Ü–∏—é, —Ç–∞–∫ –∏ –Ω–æ—Ä–º–∞–ª—å, –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–∞ –¥—Ä—É–≥–∞—è –Ω–æ—Ä–º–∞–ª—å –¥–ª—è —á–µ–≥–æ-—Ç–æ –≤ —Ç–æ–π –∂–µ
–ø–æ–∑–∏—Ü–∏–∏, —Ç–æ –Ω–∞–º –Ω—É–∂–Ω–∞ –¥—Ä—É–≥–∞—è –≤–µ—Ä—à–∏–Ω–∞. –í–æ—Ç –ø–æ—á–µ–º—É, –µ—Å–ª–∏ –º—ã –¥–µ–ª–∞–µ–º –∫—É–±,
–Ω–∞–º —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω—É–∂–Ω–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 24 –≤–µ—Ä—à–∏–Ω—ã. –•–æ—Ç—è —É –∫—É–±–∞ —Ç–æ–ª—å–∫–æ 8 —É–≥–ª–æ–≤, –∫–∞–∂–¥–æ–π
–≥—Ä–∞–Ω–∏ –∫—É–±–∞ –Ω—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ –Ω–æ—Ä–º–∞–ª–∏ –≤ —ç—Ç–∏—Ö —É–≥–ª–∞—Ö.

–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫—É–±–∞ –ª–µ–≥–∫–æ –ø—Ä–æ—Å—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–æ—Ä–º–∞–ª–∏, –Ω–æ –¥–ª—è
–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π —Ñ–æ—Ä–º—ã –Ω–µ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ —Ä–µ—à–∏—Ç—å.

–í—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏–º–µ—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–ø—Ü–∏–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ—Ä–º–∞–ª–µ–π. –û–±—ã—á–Ω—ã–π —Å–ø–æ—Å–æ–± - –¥–ª—è –∫–∞–∂–¥–æ–π
–æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–µ—Ä—à–∏–Ω—ã –æ–Ω–∏ —É—Å—Ä–µ–¥–Ω—è—é—Ç –Ω–æ—Ä–º–∞–ª–∏ –≤—Å–µ—Ö –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç—É –≤–µ—Ä—à–∏–Ω—É. –ó–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω–∏
–ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–±—Ä–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É–≥–æ–ª. –ï—Å–ª–∏ —É–≥–æ–ª –º–µ–∂–¥—É –æ–¥–Ω–∏–º –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º
–≤–µ—Ä—à–∏–Ω–æ–π, –±–æ–ª—å—à–µ —ç—Ç–æ–≥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —É–≥–ª–∞, —Ç–æ –æ–Ω–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –Ω–æ–≤—É—é –≤–µ—Ä—à–∏–Ω—É.

–î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ.

    function generateNormals(arrays, maxAngle) {
      const positions = arrays.position;
      const texcoords = arrays.texcoord;

      // —Å–Ω–∞—á–∞–ª–∞ –≤—ã—á–∏—Å–ª—è–µ–º –Ω–æ—Ä–º–∞–ª—å –∫–∞–∂–¥–æ–≥–æ –ª–∏—Ü–∞
      let getNextIndex = makeIndiceIterator(arrays);
      const numFaceVerts = getNextIndex.numElements;
      const numVerts = arrays.position.length;
      const numFaces = numFaceVerts / 3;
      const faceNormals = [];

      // –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ—Ä–º–∞–ª—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏—Ü–∞.
      // –î–µ–ª–∞—è —ç—Ç–æ, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –≤–µ—Ä—à–∏–Ω—É –¥–ª—è –∫–∞–∂–¥–æ–π –≤–µ—Ä—à–∏–Ω—ã –ª–∏—Ü–∞
      for (let i = 0; i < numFaces; ++i) {
        const n1 = getNextIndex() * 3;
        const n2 = getNextIndex() * 3;
        const n3 = getNextIndex() * 3;

        const v1 = positions.slice(n1, n1 + 3);
        const v2 = positions.slice(n2, n2 + 3);
        const v3 = positions.slice(n3, n3 + 3);

        faceNormals.push(m4.normalize(m4.cross(m4.subtractVectors(v1, v2), m4.subtractVectors(v3, v2))));
      }

      let tempVerts = {};
      let tempVertNdx = 0;

      // —ç—Ç–æ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –ø–æ–∑–∏—Ü–∏–∏ –≤–µ—Ä—à–∏–Ω —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—é—Ç

      function getVertIndex(x, y, z) {

        const vertId = x + "," + y + "," + z;
        const ndx = tempVerts[vertId];
        if (ndx !== undefined) {
          return ndx;
        }
        const newNdx = tempVertNdx++;
        tempVerts[vertId] = newNdx;
        return newNdx;
      }

      // –ù–∞–º –Ω—É–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å –æ–±—â–∏–µ –≤–µ—Ä—à–∏–Ω—ã.
      // –≠—Ç–æ –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ, –∫–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –ª–∏—Ü–∞ (—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏),
      // –ø–æ—Ç–æ–º—É —á—Ç–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É –Ω–∞—Å –µ—Å—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ü–∏–ª–∏–Ω–¥—Ä
      //
      //
      //      3-4
      //     /   \
      //    2     5   –°–º–æ—Ç—Ä–∏–º –≤–Ω–∏–∑ –Ω–∞ —Ü–∏–ª–∏–Ω–¥—Ä, –Ω–∞—á–∏–Ω–∞—è —Å S
      //    |     |   –∏ –∏–¥—è –≤–æ–∫—Ä—É–≥ –∫ E, E –∏ S –Ω–µ —è–≤–ª—è—é—Ç—Å—è
      //    1     6   —Ç–æ–π –∂–µ –≤–µ—Ä—à–∏–Ω–æ–π –≤ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ —É –Ω–∞—Å –µ—Å—Ç—å,
      //     \   /    –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–∏–µ UV –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.
      //      S/E
      //
      // –≤–µ—Ä—à–∏–Ω—ã –≤ –Ω–∞—á–∞–ª–µ –∏ –∫–æ–Ω—Ü–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–∏–µ –≤–µ—Ä—à–∏–Ω—ã,
      // –ø–æ—Å–∫–æ–ª—å–∫—É —É –Ω–∏—Ö —Ä–∞–∑–Ω—ã–µ UV, –Ω–æ –µ—Å–ª–∏ –≤—ã –Ω–µ —Å—á–∏—Ç–∞–µ—Ç–µ
      // –∏—Ö –æ–±—â–∏–º–∏ –≤–µ—Ä—à–∏–Ω–∞–º–∏, –æ–Ω–∏ –ø–æ–ª—É—á–∞—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–æ—Ä–º–∞–ª–∏

      const vertIndices = [];
      for (let i = 0; i < numVerts; ++i) {
        const offset = i * 3;
        const vert = positions.slice(offset, offset + 3);
        vertIndices.push(getVertIndex(vert));
      }

      // –ø—Ä–æ—Ö–æ–¥–∏–º —á–µ—Ä–µ–∑ –∫–∞–∂–¥—É—é –≤–µ—Ä—à–∏–Ω—É –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º, –Ω–∞ –∫–∞–∫–∏—Ö –ª–∏—Ü–∞—Ö –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è
      const vertFaces = [];
      getNextIndex.reset();
      for (let i = 0; i < numFaces; ++i) {
        for (let j = 0; j < 3; ++j) {
          const ndx = getNextIndex();
          const sharedNdx = vertIndices[ndx];
          let faces = vertFaces[sharedNdx];
          if (!faces) {
            faces = [];
            vertFaces[sharedNdx] = faces;
          }
          faces.push(i);
        }
      }

      // —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Ö–æ–¥–∏–º —á–µ—Ä–µ–∑ –∫–∞–∂–¥–æ–µ –ª–∏—Ü–æ –∏ –≤—ã—á–∏—Å–ª—è–µ–º –Ω–æ—Ä–º–∞–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–π
      // –≤–µ—Ä—à–∏–Ω—ã –ª–∏—Ü–∞. –í–∫–ª—é—á–∞–µ–º —Ç–æ–ª—å–∫–æ –ª–∏—Ü–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –±–æ–ª—å—à–µ —á–µ–º
      // –Ω–∞ maxAngle. –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –º–∞—Å—Å–∏–≤—ã newPositions,
      // newTexcoords –∏ newNormals, –æ—Ç–±—Ä–∞—Å—ã–≤–∞—è –ª—é–±—ã–µ –≤–µ—Ä—à–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ
      // –æ–¥–∏–Ω–∞–∫–æ–≤—ã.
      tempVerts = {};
      tempVertNdx = 0;
      const newPositions = [];
      const newTexcoords = [];
      const newNormals = [];

      function getNewVertIndex(x, y, z, nx, ny, nz, u, v) {
        const vertId =
            x + "," + y + "," + z + "," +
            nx + "," + ny + "," + nz + "," +
            u + "," + v;

        const ndx = tempVerts[vertId];
        if (ndx !== undefined) {
          return ndx;
        }
        const newNdx = tempVertNdx++;
        tempVerts[vertId] = newNdx;
        newPositions.push(x, y, z);
        newNormals.push(nx, ny, nz);
        newTexcoords.push(u, v);
        return newNdx;
      }

      const newVertIndices = [];

      getNextIndex.reset();
      const maxAngleCos = Math.cos(maxAngle);
      // –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏—Ü–∞
      for (let i = 0; i < numFaces; ++i) {
        // –ø–æ–ª—É—á–∞–µ–º –Ω–æ—Ä–º–∞–ª—å –¥–ª—è —ç—Ç–æ–≥–æ –ª–∏—Ü–∞
        const thisFaceNormal = faceNormals[i];
        // –¥–ª—è –∫–∞–∂–¥–æ–π –≤–µ—Ä—à–∏–Ω—ã –Ω–∞ –ª–∏—Ü–µ
        for (let j = 0; j < 3; ++j) {
          const ndx = getNextIndex();
          const sharedNdx = vertIndices[ndx];
          const faces = vertFaces[sharedNdx];
          const norm = [0, 0, 0];
          faces.forEach(faceNdx => {
            // —ç—Ç–æ –ª–∏—Ü–æ —Å–º–æ—Ç—Ä–∏—Ç –≤ —Ç–æ–º –∂–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
            const otherFaceNormal = faceNormals[faceNdx];
            const dot = m4.dot(thisFaceNormal, otherFaceNormal);
            if (dot > maxAngleCos) {
              m4.addVectors(norm, otherFaceNormal, norm);
            }
          });
          m4.normalize(norm, norm);
          const poffset = ndx * 3;
          const toffset = ndx * 2;
          newVertIndices.push(getNewVertIndex(
              positions[poffset + 0], positions[poffset + 1], positions[poffset + 2],
              norm[0], norm[1], norm[2],
              texcoords[toffset + 0], texcoords[toffset + 1]));
        }
      }

      return {
        position: newPositions,
        texcoord: newTexcoords,
        normal: newNormals,
        indices: newVertIndices,
      };

    }

    function makeIndexedIndicesFn(arrays) {
      const indices = arrays.indices;
      let ndx = 0;
      const fn = function() {
        return indices[ndx++];
      };
      fn.reset = function() {
        ndx = 0;
      };
      fn.numElements = indices.length;
      return fn;
    }

    function makeUnindexedIndicesFn(arrays) {
      let ndx = 0;
      const fn = function() {
        return ndx++;
      };
      fn.reset = function() {
        ndx = 0;
      }
      fn.numElements = arrays.positions.length / 3;
      return fn;
    }

    function makeIndiceIterator(arrays) {
      return arrays.indices
          ? makeIndexedIndicesFn(arrays)
          : makeUnindexedIndicesFn(arrays);
    }

–í –∫–æ–¥–µ –≤—ã—à–µ —Å–Ω–∞—á–∞–ª–∞ –º—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ—Ä–º–∞–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏—Ü–∞ (–∫–∞–∂–¥–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞) –∏–∑ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ç–æ—á–µ–∫.
–ó–∞—Ç–µ–º –º—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–∞–±–æ—Ä –∏–Ω–¥–µ–∫—Å–æ–≤ –≤–µ—Ä—à–∏–Ω, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã. –≠—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –∫–æ–≥–¥–∞ –º—ã –≤—Ä–∞—â–∞–ª–∏
—Ç–æ—á–∫–∏, –ø–µ—Ä–≤–∞—è —Ç–æ—á–∫–∞ –∏ –ø–æ—Å–ª–µ–¥–Ω—è—è —Ç–æ—á–∫–∞ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å, –Ω–æ —É –Ω–∏—Ö —Ä–∞–∑–Ω—ã–µ UV –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã,
–ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —Ç–æ—á–∫–æ–π. –î–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–æ—Ä–º–∞–ª–µ–π –≤–µ—Ä—à–∏–Ω –Ω–∞–º –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –æ–Ω–∏ —Å—á–∏—Ç–∞–ª–∏—Å—å –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ
—Ç–æ—á–∫–æ–π.

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ, –¥–ª—è –∫–∞–∂–¥–æ–π –≤–µ—Ä—à–∏–Ω—ã –º—ã —Å–æ—Å—Ç–∞–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ª–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç.

–ù–∞–∫–æ–Ω–µ—Ü, –º—ã —É—Å—Ä–µ–¥–Ω—è–µ–º –Ω–æ—Ä–º–∞–ª–∏ –≤—Å–µ—Ö –ª–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞–∂–¥–∞—è –≤–µ—Ä—à–∏–Ω–∞, –∏—Å–∫–ª—é—á–∞—è —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è
–±–æ–ª—å—à–µ —á–µ–º –Ω–∞ `maxAngle`, –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –Ω–∞–±–æ—Ä –≤–µ—Ä—à–∏–Ω.

–í–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

{{{example url="../webgl-3d-lathe-step-03.html"}}}

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –ø–æ–ª—É—á–∞–µ–º –æ—Å—Ç—Ä—ã–µ –∫—Ä–∞—è —Ç–∞–º, –≥–¥–µ –º—ã –∏—Ö —Ö–æ—Ç–∏–º. –°–¥–µ–ª–∞–π—Ç–µ `maxAngle` –±–æ–ª—å—à–µ, –∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ, –∫–∞–∫ —ç—Ç–∏ –∫—Ä–∞—è
—Å–≥–ª–∞–∂–∏–≤–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞ —Å–æ—Å–µ–¥–Ω–∏–µ –ª–∏—Ü–∞ –Ω–∞—á–∏–Ω–∞—é—Ç –≤–∫–ª—é—á–∞—Ç—å—Å—è –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–æ—Ä–º–∞–ª–µ–π.
–¢–∞–∫–∂–µ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `divisions` –Ω–∞ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ 5 –∏–ª–∏ 6, –∑–∞—Ç–µ–º –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `maxAngle`, –ø–æ–∫–∞ –∫—Ä–∞—è
–≤–æ–∫—Ä—É–≥ –Ω–µ —Å—Ç–∞–Ω—É—Ç –∂–µ—Å—Ç–∫–∏–º–∏, –Ω–æ —á–∞—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–≥–ª–∞–¥–∏—Ç—å, –æ—Å—Ç–∞–ª–∏—Å—å —Å–≥–ª–∞–∂–µ–Ω–Ω—ã–º–∏. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `mode`
–Ω–∞ `lit`, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å –æ—Å–≤–µ—â–µ–Ω–∏–µ–º, –ø—Ä–∏—á–∏–Ω–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–º –Ω—É–∂–Ω—ã –Ω–æ—Ä–º–∞–ª–∏.

## –ò—Ç–∞–∫, —á–µ–º—É –º—ã –Ω–∞—É—á–∏–ª–∏—Å—å?

–ú—ã –Ω–∞—É—á–∏–ª–∏—Å—å, —á—Ç–æ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å 3D –¥–∞–Ω–Ω—ã–µ, **–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –ü–ê–ö–ï–¢ 3D –ú–û–î–ï–õ–ò–†–û–í–ê–ù–ò–Ø!!!** üòù

–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª–µ–∑–Ω–æ–µ, –≤–∞–º, –≤–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∏–π [UV —Ä–µ–¥–∞–∫—Ç–æ—Ä](https://www.google.com/search?q=uv+editor).
–†–∞–±–æ—Ç–∞ —Å –∫—Ä—ã—à–∫–∞–º–∏ —Ç–∞–∫–∂–µ —è–≤–ª—è–µ—Ç—Å—è —á–µ–º-—Ç–æ, —Å —á–µ–º –ø–æ–º–æ–∂–µ—Ç 3D —Ä–µ–¥–∞–∫—Ç–æ—Ä. –í–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –æ–ø—Ü–∏–π –ø—Ä–∏ —Ç–æ–∫–∞—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ, –≤—ã –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
–¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫—Ä—ã—à–µ–∫ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã—Ö UV –¥–ª—è –∫—Ä—ã—à–µ–∫. 3D —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç [–≤—ã–¥–∞–≤–ª–∏–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–µ–π](https://www.google.com/search?q=extruding+model)
–∏ [–≤—ã–¥–∞–≤–ª–∏–≤–∞–Ω–∏–µ –≤–¥–æ–ª—å –ø—É—Ç–∏](https://www.google.com/search?q=extruding+along+a+path), –∫–æ—Ç–æ—Ä—ã–µ, –µ—Å–ª–∏ –≤—ã –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ,
–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ –æ—á–µ–≤–∏–¥–Ω–æ, –∫–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Ç–æ–∫–∞—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã—à–µ.

## –°—Å—ã–ª–∫–∏

–Ø —Ö–æ—Ç–µ–ª —É–ø–æ–º—è–Ω—É—Ç—å, —á—Ç–æ –Ω–µ —Å–º–æ–≥ –±—ã —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –±–µ–∑ [—ç—Ç–æ–π –ø–æ—Ç—Ä—è—Å–∞—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ –∫—Ä–∏–≤—ã—Ö –ë–µ–∑—å–µ](https://pomax.github.io/bezierinfo/).

<div class="webgl_bottombar">
<h3>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∑–¥–µ—Å—å –æ–ø–µ—Ä–∞—Ç–æ—Ä –º–æ–¥—É–ª–æ?</h3>
<p>–ï—Å–ª–∏ –≤—ã –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é <code>lathePoints</code>, –≤—ã —É–≤–∏–¥–∏—Ç–µ —ç—Ç–æ—Ç –º–æ–¥—É–ª–æ
–ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ —É–≥–ª–∞.</p>
<pre class="prettyprint showlinemods">
for (let division = 0; division <= numDivisions; ++division) {
  const u = division / numDivisions;
*  const angle = lerp(startAngle, endAngle, u) % (Math.PI * 2);
</pre>
<p>–ü–æ—á–µ–º—É –æ–Ω —Ç–∞–º?</p>
<p>–ö–æ–≥–¥–∞ –º—ã –≤—Ä–∞—â–∞–µ–º —Ç–æ—á–∫–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ–∫—Ä—É–≥ –∫—Ä—É–≥–∞, –º—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –ø–µ—Ä–≤–∞—è
–∏ –ø–æ—Å–ª–µ–¥–Ω—è—è —Ç–æ—á–∫–∏ —Å–æ–≤–ø–∞–¥–∞–ª–∏. <code>Math.sin(0)</code> –∏ <code>Math.sin(Math.PI * 2)</code>
–¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å, –Ω–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –Ω–µ –∏–¥–µ–∞–ª—å–Ω–∞, –∏ —Ö–æ—Ç—è –æ–Ω–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–ª–∏–∑–∫–∏
–≤ –æ–±—â–µ–º, –æ–Ω–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ 100% —Ä–∞–≤–Ω—ã–º–∏.</p>
<p>–≠—Ç–æ –≤–∞–∂–Ω–æ, –∫–æ–≥–¥–∞ –º—ã –ø—ã—Ç–∞–µ–º—Å—è –≤—ã—á–∏—Å–ª–∏—Ç—å –Ω–æ—Ä–º–∞–ª–∏. –ú—ã —Ö–æ—Ç–∏–º –∑–Ω–∞—Ç—å –≤—Å–µ –ª–∏—Ü–∞, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–µ—Ä—à–∏–Ω–∞.
–ú—ã –≤—ã—á–∏—Å–ª—è–µ–º —ç—Ç–æ, —Å—Ä–∞–≤–Ω–∏–≤–∞—è –≤–µ—Ä—à–∏–Ω—ã. –ï—Å–ª–∏ 2 –≤–µ—Ä—à–∏–Ω—ã —Ä–∞–≤–Ω—ã, –º—ã –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è
–æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –≤–µ—Ä—à–∏–Ω–æ–π. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –ø–æ—Å–∫–æ–ª—å–∫—É <code>Math.sin(0)</code> –∏ <code>Math.sin(Math.PI * 2)</code>
–Ω–µ —Ä–∞–≤–Ω—ã, –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –≤–µ—Ä—à–∏–Ω–æ–π. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ –Ω–æ—Ä–º–∞–ª–µ–π
–æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –≤—Å–µ –ª–∏—Ü–∞, –∏ –∏—Ö –Ω–æ—Ä–º–∞–ª–∏ –±—É–¥—É—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏.</p>
<p>–í–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∫–æ–≥–¥–∞ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç</p>
<img class="webgl_center" src="resources/lathe-normal-seam.png" width="400" />
<p>–ö–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –≤–∏–¥–µ—Ç—å, –µ—Å—Ç—å —à–æ–≤, –≥–¥–µ –≤–µ—Ä—à–∏–Ω—ã –Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è –æ–±—â–∏–º–∏,
–ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è 100% —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ–º</p>
<p>–ú–æ—è –ø–µ—Ä–≤–∞—è –º—ã—Å–ª—å –±—ã–ª–∞, —á—Ç–æ —è –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å –º–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Ç–∞–∫, —á—Ç–æ–±—ã –∫–æ–≥–¥–∞ —è –ø—Ä–æ–≤–µ—Ä—è—é —Å–æ–≤–ø–∞–¥–∞—é—â–∏–µ
–≤–µ—Ä—à–∏–Ω—ã, —è –ø—Ä–æ–≤–µ—Ä—è–ª, –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ª–∏ –æ–Ω–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è. –ï—Å–ª–∏ –¥–∞, —Ç–æ –æ–Ω–∏ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –≤–µ—Ä—à–∏–Ω–∞.
–ß—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —ç—Ç–æ–≥–æ.
<pre class="prettyprint">
const epsilon = 0.0001;
const tempVerts = [];
function getVertIndex(position) {
  if (tempVerts.length) {
    // –Ω–∞–π—Ç–∏ –±–ª–∏–∂–∞–π—à—É—é —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –≤–µ—Ä—à–∏–Ω—É
    let closestNdx = 0;
    let closestDistSq = v2.distanceSq(position, tempVerts[0]);
    for (let i = 1; i < tempVerts.length; ++i) {
      let distSq = v2.distanceSq(position, tempVerts[i]);
      if (distSq < closestDistSq) {
        closestDistSq = distSq;
        closestNdx = i;
      }
    }
    // –±—ã–ª–∞ –ª–∏ –±–ª–∏–∂–∞–π—à–∞—è –≤–µ—Ä—à–∏–Ω–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–ª–∏–∑–∫–æ?
    if (closestDistSq < epsilon) {
      // –¥–∞, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–Ω–¥–µ–∫—Å —ç—Ç–æ–π –≤–µ—Ä—à–∏–Ω—ã.
      return closestNdx;
    }
  }
  // –Ω–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è, –¥–æ–±–∞–≤–ª—è–µ–º –≤–µ—Ä—à–∏–Ω—É –∫–∞–∫ –Ω–æ–≤—É—é –≤–µ—Ä—à–∏–Ω—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ—ë –∏–Ω–¥–µ–∫—Å.
  tempVerts.push(position);
  return tempVerts.length - 1;
}
</pre>
<p>–≠—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ! –≠—Ç–æ —É–±—Ä–∞–ª–æ —à–æ–≤. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —ç—Ç–æ –∑–∞–Ω—è–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏
—Å–¥–µ–ª–∞–ª–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ–ø—Ä–∏–≥–æ–¥–Ω—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –≠—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ O^2. –ï—Å–ª–∏ –≤—ã —Å–¥–≤–∏–Ω–µ—Ç–µ –ø–æ–ª–∑—É–Ω–∫–∏
–¥–ª—è –Ω–∞–∏–±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–µ—Ä—à–∏–Ω (distance/divisions) –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ, –≤—ã –º–æ–∂–µ—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å ~114000 –≤–µ—Ä—à–∏–Ω.
–î–ª—è O^2 —ç—Ç–æ –¥–æ 12 –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤ –∏—Ç–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–∏–∑–æ–π—Ç–∏.
</p>
<p>–Ø –∏—Å–∫–∞–ª –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –Ø –Ω–µ –Ω–∞—à–µ–ª. –Ø –¥—É–º–∞–ª –æ —Ç–æ–º, —á—Ç–æ–±—ã –ø–æ–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–æ—á–∫–∏
–≤ [–æ–∫—Ç–æ–¥–µ—Ä–µ–≤–æ](https://en.wikipedia.org/wiki/Octree), —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–∞—é—â–∏—Ö —Ç–æ—á–µ–∫
–±—ã—Å—Ç—Ä–µ–µ, –Ω–æ —ç—Ç–æ –∫–∞–∂–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –¥–ª—è —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏.
</p>
<p>–ò–º–µ–Ω–Ω–æ —Ç–æ–≥–¥–∞ —è –ø–æ–Ω—è–ª, —á—Ç–æ –µ—Å–ª–∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ - –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏, –≤–æ–∑–º–æ–∂–Ω–æ, —è –º–æ–≥ –±—ã –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª–æ
–∫ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ, —á—Ç–æ–±—ã —Ç–æ—á–∫–∏ –±—ã–ª–∏ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏. –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –±—ã–ª —Ç–∞–∫–∏–º
</p>
<pre class="prettyprint">
  const angle = lerp(startAngle, endAngle, u);
</pre>
–ê –Ω–æ–≤—ã–π –∫–æ–¥ —Ç–∞–∫–∏–º
<pre class="prettyprint">
  const angle = lerp(startAngle, endAngle, u) % (Math.PI * 2);
</pre>
<p>–ò–∑-–∑–∞ –º–æ–¥—É–ª–æ <code>angle</code>, –∫–æ–≥–¥–∞ <code>endAngle</code> —Ä–∞–≤–µ–Ω <code>Math.PI * 2</code>, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 0
–∏ –ø–æ—ç—Ç–æ–º—É –æ–Ω —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ –Ω–∞—á–∞–ª–æ. –®–æ–≤ –∏—Å—á–µ–∑. –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!</p>
<p>–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –¥–∞–∂–µ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º, –µ—Å–ª–∏ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ <code>distance</code> –Ω–∞ 0.001
–∏ <code>divisions</code> –Ω–∞ 60, —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—á—Ç–∏ —Å–µ–∫—É–Ω–¥—É –Ω–∞ –º–æ–µ–π –º–∞—à–∏–Ω–µ –¥–ª—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ —Å–µ—Ç–∫–∏. –•–æ—Ç—è
–º–æ–≥—É—Ç –±—ã—Ç—å —Å–ø–æ—Å–æ–±—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ, —è –¥—É–º–∞—é, —á—Ç–æ —Å—É—Ç—å –≤ –ø–æ–Ω–∏–º–∞–Ω–∏–∏, —á—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ–∂–Ω—ã—Ö
—Å–µ—Ç–æ–∫ - —ç—Ç–æ –≤–æ–æ–±—â–µ –º–µ–¥–ª–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è. –≠—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –ø–æ—á–µ–º—É 3D –∏–≥—Ä–∞ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ 60fps,
–Ω–æ 3D –ø–∞–∫–µ—Ç –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö –∫–∞–¥—Ä–æ–≤.
</p>
</div>

<div class="webgl_bottombar">
<h3>–ù–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –º–∞—Ç—Ä–∏—á–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –∑–¥–µ—Å—å?</h3>
<p>–ö–æ–≥–¥–∞ –º—ã –≤—ã—Ç–∞—á–∏–≤–∞–µ–º —Ç–æ—á–∫–∏, –µ—Å—Ç—å —ç—Ç–æ—Ç –∫–æ–¥ –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è.</p>
<pre class="prettyprint">
const mat = m4.yRotation(angle);
...
points.forEach((p, ndx) => {
  const tp = m4.transformPoint(mat, [...p, 0]);
  ...
</pre>
<p>–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π 3D —Ç–æ—á–∫–∏ –º–∞—Ç—Ä–∏—Ü–µ–π 4x4 —Ç—Ä–µ–±—É–µ—Ç 16 —É–º–Ω–æ–∂–µ–Ω–∏–π, 12 —Å–ª–æ–∂–µ–Ω–∏–π –∏ 3 –¥–µ–ª–µ–Ω–∏—è.
–ú—ã –º–æ–≥–ª–∏ –±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å, –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—è [–º–∞—Ç–µ–º–∞—Ç–∏–∫—É –≤—Ä–∞—â–µ–Ω–∏—è –≤ —Å—Ç–∏–ª–µ –µ–¥–∏–Ω–∏—á–Ω–æ–≥–æ –∫—Ä—É–≥–∞](webgl-2d-rotation.html).
</p>
<pre class="prettyprint">
const s = Math.sin(angle);
const c = Math.cos(angle);
...
points.forEach((p, ndx) => {
  const x = p[0];
  const y = p[1];
  const z = p[2];
  const tp = [
    x * c - z * s,
    y,
    x * s + z * c,
  ];
  ...
</pre>
<p>
–≠—Ç–æ —Ç–æ–ª—å–∫–æ 4 —É–º–Ω–æ–∂–µ–Ω–∏—è –∏ 2 —Å–ª–æ–∂–µ–Ω–∏—è –∏ –±–µ–∑ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏, —á—Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –∫–∞–∫ –º–∏–Ω–∏–º—É–º –≤ 6 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ.
</p>
<p>
–°—Ç–æ–∏—Ç –ª–∏ —ç—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è? –ù—É, –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ —è –Ω–µ –¥—É–º–∞—é, —á—Ç–æ –º—ã –¥–µ–ª–∞–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ,
—á—Ç–æ–±—ã —ç—Ç–æ –∏–º–µ–ª–æ –∑–Ω–∞—á–µ–Ω–∏–µ. –ú–æ—è –º—ã—Å–ª—å –±—ã–ª–∞, —á—Ç–æ –≤—ã –º–æ–≥–ª–∏ –±—ã –∑–∞—Ö–æ—Ç–µ—Ç—å –ø–æ–∑–≤–æ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Ä–µ—à–∏—Ç—å, –≤–æ–∫—Ä—É–≥ –∫–∞–∫–æ–π –æ—Å–∏
–≤—Ä–∞—â–∞—Ç—å—Å—è. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã —Å–¥–µ–ª–∞–ª–æ –±—ã —ç—Ç–æ –ª–µ–≥–∫–∏–º, —á—Ç–æ–±—ã –ø–æ–∑–≤–æ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–µ—Ä–µ–¥–∞—Ç—å –æ—Å—å
–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ
</p>
<pre class="prettyprint">
   const mat = m4.axisRotation(userSuppliedAxis, angle);
</pre>
<p>–ö–∞–∫–æ–π —Å–ø–æ—Å–æ–± –ª—É—á—à–µ, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—Å –∏ –≤–∞—à–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π. –Ø –¥—É–º–∞—é, —á—Ç–æ —è –±—ã –≤—ã–±—Ä–∞–ª –≥–∏–±–∫–æ—Å—Ç—å —Å–Ω–∞—á–∞–ª–∞
–∏ —Ç–æ–ª—å–∫–æ –ø–æ–∑–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –±—ã–ª–æ —Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω—ã–º –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ —è –¥–µ–ª–∞–ª.
</p>
</div> 
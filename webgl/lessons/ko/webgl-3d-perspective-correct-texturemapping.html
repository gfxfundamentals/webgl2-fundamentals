<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.md. Do not edited directly -->
<!--
Copyright 2021, GFXFundamentals.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*   Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.

*   Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.

*   Neither the name of GFXFundamentals. nor the names of his
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="W의 특별한 점">
<meta name="keywords" content="webgl webgl2 graphics">
<meta name="thumbnail" content="https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-3d-perspective-correct-texturemapping_ko.jpg">

<meta property="og:title" content="WebGL2 3D 원근 교정 텍스처 매핑">
<meta property="og:type" content="website">
<meta property="og:image" content="https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-3d-perspective-correct-texturemapping_ko.jpg">
<meta property="og:description" content="W의 특별한 점">
<meta property="og:url" content="https://webgl2fundamentals.org/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@greggman">
<meta name="twitter:creator" content="@greggman">
<meta name="twitter:domain" content="webgl2fundamentals.org">
<meta name="twitter:title" content="WebGL2 3D 원근 교정 텍스처 매핑">
<meta name="twitter:url" content="https://webgl2fundamentals.org/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html">
<meta name="twitter:description" content="W의 특별한 점">
<meta name="twitter:image:src" content="https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-3d-perspective-correct-texturemapping_ko.jpg">

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webgl2fundamentals.org/#website",
      "url":"https://webgl2fundamentals.org/",
      "name":"Webgl2Fundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webgl2fundamentals.org/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html#primaryimage",
      "url":"https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-3d-perspective-correct-texturemapping_ko.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webgl2fundamentals.org/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html#webpage",
      "url":"https://webgl2fundamentals.org/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html",
      "inLanguage":"ko",
      "name":"WebGL2 3D 원근 교정 텍스처 매핑",
      "keywords":"webgl webgl2 graphics programming",
      "isPartOf":{
        "@id":"https://webgl2fundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webgl2fundamentals.org/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html#primaryimage"
      }
    }
  ]
}
</script>


<title>WebGL2 3D 원근 교정 텍스처 매핑</title>
<link href="/webgl/lessons/resources/webgl2fundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/lang.css">
<link rel="stylesheet" href="/webgl/lessons/ko/lang.css">
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css">

  <link rel="alternate" hreflang="en" href="https://webglfundamentals.org/webgl/lessons/webgl-3d-perspective-correct-texturemapping.html">
  <link rel="alternate" hreflang="de" href="https://webglfundamentals.org/webgl/lessons/de/webgl-3d-perspective-correct-texturemapping.html">
  <link rel="alternate" hreflang="ja" href="https://webglfundamentals.org/webgl/lessons/ja/webgl-3d-perspective-correct-texturemapping.html">
  <link rel="alternate" hreflang="ko" href="https://webglfundamentals.org/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html">
  <link rel="alternate" hreflang="pt-br" href="https://webglfundamentals.org/webgl/lessons/pt-br/webgl-3d-perspective-correct-texturemapping.html">
  <link rel="alternate" hreflang="ru" href="https://webglfundamentals.org/webgl/lessons/ru/webgl-3d-perspective-correct-texturemapping.html">
  <link rel="alternate" hreflang="zh_cn" href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-3d-perspective-correct-texturemapping.html">




</head>
<body>
<div class="webgl_navbar">
  <div>
    <select class="language">
    <option value="/webgl/lessons/webgl-3d-perspective-correct-texturemapping.html" >English</a>
    <option value="/webgl/lessons/de/webgl-3d-perspective-correct-texturemapping.html" >Deutsch</a>
    <option value="/webgl/lessons/ja/webgl-3d-perspective-correct-texturemapping.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html" selected>한국어</a>
    <option value="/webgl/lessons/pt-br/webgl-3d-perspective-correct-texturemapping.html" >Português Brasileiro</a>
    <option value="/webgl/lessons/ru/webgl-3d-perspective-correct-texturemapping.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-3d-perspective-correct-texturemapping.html" >简体中文</a>
</select>


    <a href="#toc">목차</a>
    <input type="search" placeholder="?" id="search">
  </div>
</div>
<div class="webgl_header">
  <h1><a href="/webgl/lessons/ko/">WebGL2Fundamentals.org</a></h1>
<style>
#forkongithub>div {
    background: #000;
    color: #fff;
    font-family: arial,sans-serif;
    text-align: center;
    font-weight: bold;
    padding: 5px 40px;
    font-size: 0.9rem;
    line-height: 1.3rem;
    position: relative;
    transition: 0.5s;
    display: block;
    width: 400px;
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(200px) rotate(45deg) translate(10px,70px);
    box-shadow: 4px 4px 10px rgba(0,0,0,0.8);
    pointer-events: auto;
}
#forkongithub a {
  text-decoration: none;
  color: #fff;
}
#forkongithub>div:hover {
    background: #c11;
    color: #fff;
}
#forkongithub .contributors {
  font-size: 0.75rem;
  background: rgba(255,255,255,0.2);
  line-height: 1.2;
  padding: 0.1em;
}
#forkongithub>div::before,#forkongithub>div::after {
    content: "";
    width: 100%;
    display: block;
    position: absolute;
    top: 1px;
    left: 0;
    height: 1px;
    background: #fff;
}
#forkongithub>div::after {
    bottom: 1px;
    top: auto;
}

#forkongithub{
    z-index: 9999;
    /* needed for firefox */
    overflow: hidden;
    width: 300px;
    height: 300px;
    position: absolute;
    right: 0;
    top: 0;
    pointer-events: none;
}
#forkongithub svg{
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
#forkongithub img {
  width: 1em;
  height: 1em;
  border-radius: 100%;
  vertical-align: middle;
}

@media (max-width: 900px) {
    #forkongithub>div {
        line-height: 1.2rem;
    }
}
@media (max-width: 700px) {
  #forkongithub {
    display: none;
  }
}
@media (max-width: 410px) {
    #forkongithub>div {
        font-size: 0.7rem;
        transform: translateX(150px) rotate(45deg) translate(20px,40px);
    }
}

</style>
<div id="forkongithub"><div><div><a href="https://github.com/gfxfundamentals/webgl2-fundamentals">Fix, Fork, Contribute <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904" style="fill:white;"/>
    </g>
</svg>
</a></div></div></div>

</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL2 3D 원근 교정 텍스처 매핑</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <p>이 포스트는 WebGL 관련 시리즈의 글입니다.
<a href="webgl-fundamentals.html">WebGL2 기초</a>부터 시작했습니다.
이 글은 원근 교정 텍스처 매핑을 다룹니다.
이 내용을 이해하기 위해서는 <a href="webgl-3d-perspective.html">원근 투영</a>과 <a href="webgl-3d-textures.html">텍스처</a>에 대해 먼저 읽어보셔야 할겁니다.
또한 <a href="webgl-how-it-works.html">varying과 그 기능</a>에 대해 알아야 하지만 이 글에서 간략하게 설명하겠습니다.</p>
<p>&quot;<a href="webgl-how-it-works.html">동작 원리</a>&quot;에서 varying이 어떻게 작동하는지 말씀드렸습니다.
정점 셰이더에서는 varying을 선언하고 어떤 값을 설정할 수 있습니다.
정점 셰이더가 3번 호출되면 WebGL은 삼각형을 그립니다.
해당 삼각형을 그리는 동안 모든 픽셀에 대해 프래그먼트 셰이더를 호출해서 해당 픽셀을 어떤 색상으로 칠할 것인지를 결정합니다.
삼각형의 정점 세개 사이에서는 세개의 값이 보간된 varying이 전달됩니다.</p>
<p><div class="webgl_diagram_container">
  <iframe class="webgl_example " style="width: 600px; height: 400px;" src="/webgl/lessons/resources/fragment-shader-anim.html"></iframe>
  <div class="webgl_center">v_color는 v0, v1, v2 사이에서 보간</div>
</div>

</p>
<p><a href="webgl-fundamentals.html">첫 번째 글</a>로 돌아가보면 우리는 클립 공간에서 삼각형을 그렸습니다.
다음과 같이 간단하게 작성한 정점 셰이더에, 클립 공간 좌표를 전달했습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  #version 300 es

  // attribute (in)은 정점 셰이더의 입력입니다.
  // 버퍼로부터 데이터를 받습니다.
  in vec4 a_position;

  // 모든 셰이더는 main 함수를 가집니다.
  void main() {

    // gl_Position은 정점 셰이더가 값을 
    //설정해 주어야 하는 특별한 변수입니다.
    gl_Position = a_position;
  }
</code></pre>
<p>단색으로 그리는 간단한 프래그먼트 셰이더도 있었습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  #version 300 es

  // 프래그먼트 셰이더는 기본 정밀도를 가지고 있지 않으므로 하나를 선택해야 합니다.
  // highp가 기본값으로 좋습니다.
  precision highp float;

  // 프래그먼트 셰이더에서는 출력을 선언해 주어야 합니다.
  out vec4 outColor;

  void main() {
    // 출력을 붉은 보라색 단색으로 설정합니다.
    outColor = vec4(1, 0, 0.5, 1);
  }
</code></pre>
<p>클립 공간에 두개의 사각형을 그리도록 만들어봅시다.
각 정점의 <code class="notranslate" translate="no">X</code>, <code class="notranslate" translate="no">Y</code>, <code class="notranslate" translate="no">Z</code>, <code class="notranslate" translate="no">W</code>인 데이터를 전달할 겁니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var positions = [
  -.8, -.8, 0, 1,  // 첫번째 사각형의 첫번째 삼각형
   .8, -.8, 0, 1,
  -.8, -.2, 0, 1,
  -.8, -.2, 0, 1,  // 첫번째 사각형의 두번째 삼각형
   .8, -.8, 0, 1,
   .8, -.2, 0, 1,

  -.8,  .2, 0, 1,  // 두번째 사각형의 첫번째 삼각형
   .8,  .2, 0, 1,
  -.8,  .8, 0, 1,
  -.8,  .8, 0, 1,  // 두번째 사각형의 두번째 삼각형
   .8,  .2, 0, 1,
   .8,  .8, 0, 1,
];
</code></pre>
<p>아래는 그 결과입니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-clipspace-rectangles.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-clipspace-rectangles.html" target="_blank">새 창으로 열기</a>
</div>

</p>
<p>Varying float 하나를 추가해봅시다.
해당 varying를 정점 셰이더에서 프래그먼트 셰이더로 바로 전달할 겁니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  #version 300 es

  in vec4 a_position;
+  in float a_brightness;

+  out float v_brightness;

  void main() {
    gl_Position = a_position;

+    // 프래그먼트 셰이더로 밝기 전달
+    v_brightness = a_brightness;
  }
</code></pre>
<p>프래그먼트 셰이더에서는 해당 varying을 색상을 설정하는 데 사용할 겁니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  #version 300 es

  precision highp float;

+  // 정점 셰이더에서 전달되어 보간된 값.
+  in float v_brightness;

   // 프래그먼트 셰이더에서는 출력을 선언해 주어야 합니다.
   out vec4 outColor;

  void main() {
*    outColor = vec4(v_brightness, 0, 0, 1);  // 빨강
  }
</code></pre>
<p>Varying에 데이터를 제공해야 하므로 버퍼를 만들어 데이터를 넣을 겁니다.
정점 당 하나의 값입니다.
왼쪽의 정점은 0으로 오른쪽의 정점은 1로 밝기 값을 설정합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  // 버퍼를 생성하고 12개의 밝기 값 넣기
  var brightnessBuffer = gl.createBuffer();

  // ARRAY_BUFFER에 바인딩 (ARRAY_BUFFER = brightnessBuffer)
  gl.bindBuffer(gl.ARRAY_BUFFER, brightnessBuffer);

  var brightness = [
    0,  // 첫번째 사각형의 첫번째 삼각형
    1, 
    0, 
    0,  // 첫번째 사각형의 두번째 삼각형
    1, 
    1, 

    0,  // 두번째 사각형의 첫번째 삼각형
    1, 
    0, 
    0,  // 두번째 사각형의 두번째 삼각형
    1, 
    1, 
  ];
  
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(brightness), gl.STATIC_DRAW);
</code></pre>
<p>또한 초기화할 때 <code class="notranslate" translate="no">a_brightness</code> attribute의 location을 찾아야 합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  // 정점 데이터가 어디로 가야하는지 탐색
  var positionAttributeLocation = gl.getAttribLocation(program, &quot;a_position&quot;);
+  var brightnessAttributeLocation = gl.getAttribLocation(program, &quot;a_brightness&quot;);  
</code></pre>
<p>그리고 렌더링할 때 해당 attribute를 설정합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  // Attribute 활성화
  gl.enableVertexAttribArray(brightnessAttributeLocation);

  // 위치 버퍼 바인딩
  gl.bindBuffer(gl.ARRAY_BUFFER, brightnessBuffer);

  // brightnessBuffer의 데이터를 가져오는 방법을 attribute에 알려줌 (ARRAY_BUFFER)
  var size = 1;          // iteration마다 1개의 컴포넌트
  var type = gl.FLOAT;   // 데이터는 32비트 부동소수점
  var normalize = false; // 데이터 정규화 안 함
  var stride = 0;        // 0 = 다음 위치를 가져오기 위해 iteration마다 size * sizeof(type) 만큼 앞으로 이동
  var offset = 0;        // 버퍼의 맨 앞부터 시작
  gl.vertexAttribPointer(
      brightnessAttributeLocation, size, type, normalize, stride, offset);
</code></pre>
<p>그리고 이제 렌더링하면 <code class="notranslate" translate="no">brightness</code>가 0인 왼쪽은 검은색이고 <code class="notranslate" translate="no">brightness</code>가 1인 오른쪽은 빨간색이며, 그 사이의 삼각형은 <code class="notranslate" translate="no">brightness</code>가 보간된(varying된) 두 개의 직사각형을 볼 수 있습니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-clipspace-rectangles-with-varying.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-clipspace-rectangles-with-varying.html" target="_blank">새 창으로 열기</a>
</div>

</p>
<p><a href="webgl-3d-perspective.html">원근에 관한 글</a>에서 WebGL이 우리가 입력한 <code class="notranslate" translate="no">gl_Position</code>을 가져와 <code class="notranslate" translate="no">gl_Position.w</code>로 나눈다는 것을 알게 되었습니다.</p>
<p>위의 정점들에는 <code class="notranslate" translate="no">W</code>에 <code class="notranslate" translate="no">1</code>을 설정했지만 WebGL이 <code class="notranslate" translate="no">W</code>로 나누는 걸 알고 있기 때문에 아래와 같이 해도 동일한 결과를 얻을 겁니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  var mult = 20;
  var positions = [
      -.8,  .8, 0, 1,  // 첫번째 사각형의 첫번째 삼각형
       .8,  .8, 0, 1,
      -.8,  .2, 0, 1,
      -.8,  .2, 0, 1,  // 첫번째 사각형의 두번째 삼각형
       .8,  .8, 0, 1,
       .8,  .2, 0, 1,

      -.8       , -.2       , 0,    1,  // 두번째 사각형의 첫번째 삼각형
       .8 * mult, -.2 * mult, 0, mult,
      -.8       , -.8       , 0,    1,
      -.8       , -.8       , 0,    1,  // 두번째 사각형의 두번째 삼각형
       .8 * mult, -.2 * mult, 0, mult,
       .8 * mult, -.8 * mult, 0, mult,
  ];
</code></pre>
<p>위 코드에서 두 번째 사각형의 오른쪽에 있는 모든 점에 대해 <code class="notranslate" translate="no">X</code>와 <code class="notranslate" translate="no">Y</code>에 <code class="notranslate" translate="no">mult</code>를 곱한 것을 알 수 있지만, <code class="notranslate" translate="no">W</code>를 <code class="notranslate" translate="no">mult</code>로 설정하는 것도 볼 수 있습니다.
WebGL이 <code class="notranslate" translate="no">W</code>로 나누기 때문에 똑같은 결과를 얻을 수 있겠죠?</p>
<p>음 여기 결과입니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-clipspace-rectangles-with-varying-non-1-w.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-clipspace-rectangles-with-varying-non-1-w.html" target="_blank">새 창으로 열기</a>
</div>

</p>
<p>두 사각형은 이전과 동일한 위치에 그려졌다는 것에 주목하십시오.
이건 <code class="notranslate" translate="no">X * MULT / MULT(W)</code>가 여전히 <code class="notranslate" translate="no">X</code>이고 <code class="notranslate" translate="no">Y</code>도 마찬가지라는 걸 증명합니다.
하지만 색상이 다릅니다.
무슨 일이 일어난 걸까요?</p>
<p>WebGL은 <code class="notranslate" translate="no">W</code>를 사용하여 원근 교정 텍스처 매핑을 구현하거나 varying의 원근 교정 보간을 수행합니다.</p>
<p>더 쉽게 볼 수 있도록 프래그먼트 셰이더를 건드려봅시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">outColor = vec4(fract(v_brightness * 10.), 0, 0, 1);  // 빨강
</code></pre>
<p><code class="notranslate" translate="no">v_brightness</code>를 10으로 곱하면 값이 0에서 10사이가 됩니다.
<code class="notranslate" translate="no">fract</code>는 소수 부분만 유지하므로 0에서 1사이, 0에서 1사이, 0에서 1사이값 10번이 됩니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-clipspace-rectangles-with-varying-non-1-w-repeat.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-clipspace-rectangles-with-varying-non-1-w-repeat.html" target="_blank">새 창으로 열기</a>
</div>

</p>
<p>두 값의 선형 보간 공식은 아래와 같습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no"> result = (1 - t) * a + t * b
</code></pre>
<p>여기서 <code class="notranslate" translate="no">t</code>는 <code class="notranslate" translate="no">a</code>와 <code class="notranslate" translate="no">b</code>사이의 위치를 나타내는 0에서 1사이의 값입니다.
0일 때 <code class="notranslate" translate="no">a</code>이고 1일때 <code class="notranslate" translate="no">b</code>입니다.</p>
<p>그런데 Varying의 경우 WebGL은 아래 공식을 사용합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no"> result = (1 - t) * a / aW + t * b / bW
          -----------------------------
             (1 - t) / aW + t / bW
</code></pre>
<p>여기서 <code class="notranslate" translate="no">aW</code>는 varying이 <code class="notranslate" translate="no">a</code>로 설정된 경우 <code class="notranslate" translate="no">gl_Position.w</code>에 설정된 <code class="notranslate" translate="no">W</code>이며, <code class="notranslate" translate="no">bW</code> varying이 <code class="notranslate" translate="no">b</code>로 설정된 경우 <code class="notranslate" translate="no">gl_Position.w</code>에 설정된 <code class="notranslate" translate="no">W</code>입니다.</p>
<p>그게 왜 중요할까요?
여기 <a href="webgl-3d-textures.html">텍스처에 관한 글</a>에서 만들었던 간단한 텍스처 맵핑된 육면체가 있습니다.
모든 면에서 UV 좌표는 0에서 1 사이의 값이고 4x4 픽셀 텍스처를 사용하고 있습니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-perspective-correct-cube.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-perspective-correct-cube.html" target="_blank">새 창으로 열기</a>
</div>

</p>
<p>이제 해당 예제를 가져와 정점 셰이더를 변경하여 우리가 직접 <code class="notranslate" translate="no">W</code>로 나눠봅시다.
한 줄만 추가하면 됩니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">#version 300 es

in vec4 a_position;
in vec2 a_texcoord;

uniform mat4 u_matrix;

out vec2 v_texcoord;

void main() {
  // position에 행렬을 곱함
  gl_Position = u_matrix * a_position;

+  // 직접 W로 나누기
+  gl_Position /= gl_Position.w;

  // 프래그먼트 셰이더로 texcoord 전달
  v_texcoord = a_texcoord;
}
</code></pre>
<p><code class="notranslate" translate="no">W</code>로 나누면 <code class="notranslate" translate="no">gl_Position.w</code>는 결국 1이 됩니다.
<code class="notranslate" translate="no">X</code>, <code class="notranslate" translate="no">Y</code>, <code class="notranslate" translate="no">Z</code>는 WebGL이 나누기를 수행한 것과 동일한 값이 나올 겁니다.
아래는 그 결과입니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-non-perspective-correct-cube.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-non-perspective-correct-cube.html" target="_blank">새 창으로 열기</a>
</div>

</p>
<p>여전히 3D 큐브를 얻게 되지만 텍스처가 뒤틀리고 있습니다.
이는 이전처럼 <code class="notranslate" translate="no">W</code>를 전달하지 않으면 WebGL이 원근 교정 텍스처 매핑을 할 수 없기 때문입니다.
좀 더 정확하게는 WebGL이 varying의 원근 교정 보간을 수행할 수 없습니다.</p>
<p><a href="webgl-3d-perspective.html">원근 투영 행렬</a>에서 <code class="notranslate" translate="no">Z</code>값이 <code class="notranslate" translate="no">W</code>였던 걸 떠올려보면, <code class="notranslate" translate="no">W</code>가 <code class="notranslate" translate="no">1</code>인 경우 WebGL은 그냥 선형 보간을 수행하게 됩니다.
실제로 위의 수식을 가져와 봅시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no"> result = (1 - t) * a / aW + t * b / bW
          -----------------------------
             (1 - t) / aW + t / bW
</code></pre>
<p>그리고 모든 <code class="notranslate" translate="no">W</code>를 1로 변경하면 아래와 같이 됩니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no"> result = (1 - t) * a / 1 + t * b / 1
          ---------------------------
             (1 - t) / 1 + t / 1
</code></pre>
<p>1로 나누는 것은 아무 영향이 없으므로 이렇게 단순화할 수 있습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no"> result = (1 - t) * a + t * b
          -------------------
             (1 - t) + t
</code></pre>
<p><code class="notranslate" translate="no">(1 - t) + t</code>는 <code class="notranslate" translate="no">1</code>과 같습니다.
예를 들어 <code class="notranslate" translate="no">t</code>가 <code class="notranslate" translate="no">.7</code>이면, <code class="notranslate" translate="no">(1 - .7) + .7</code>이 되고, 이건 <code class="notranslate" translate="no">.3 + .7</code>이며, 이는 곧 <code class="notranslate" translate="no">1</code>입니다.
즉 분모를 지울 수 있기 때문에 이렇게 남게 됩니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no"> result = (1 - t) * a + t * b
</code></pre>
<p>이는 위의 선형 보간 방정식과 동일합니다.</p>
<p>이제 왜 WebGL이 4x4 행렬과 <code class="notranslate" translate="no">X</code>, <code class="notranslate" translate="no">Y</code>, <code class="notranslate" translate="no">Z</code>, <code class="notranslate" translate="no">W</code> 4개의 값으로 구성된 벡터를 사용하는지 이해가 되셨으면 좋겠습니다.
<code class="notranslate" translate="no">X</code>와 <code class="notranslate" translate="no">Y</code>는 <code class="notranslate" translate="no">W</code>로 나누어 클립공간 좌표를 얻습니다.
<code class="notranslate" translate="no">W</code>로 나누는 <code class="notranslate" translate="no">Z</code>도 클립공간의 <code class="notranslate" translate="no">Z</code> 좌표가 됩니다. 하지만 <code class="notranslate" translate="no">W</code>는 varying의 보간에도 사용되어 원근 교정 텍스처 매핑이 가능하도록 합니다.</p>
<div class="webgl_bottombar">
<h3>1990년대 중반 게임 콘솔</h3>
<p>
PlayStation 1과 같은 시대의 일부 게임 콘솔들은 원근 교정 텍스처 매핑을 하지 않았습니다.
위 결과를 보면 왜 아래와 같이 보이는지 알 수 있습니다.
</p>
<div class="webgl_center"><img src="../resources/ridge-racer-01.png" style="max-width: 500px;" /></div>
<p></p>
<div class="webgl_center"><img src="../resources/ridge-racer-02.png" style="max-width: 500px;" /></div>
</div>

    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgl/lessons/webgl-3d-perspective-correct-texturemapping.html" >English</a>
    <option value="/webgl/lessons/de/webgl-3d-perspective-correct-texturemapping.html" >Deutsch</a>
    <option value="/webgl/lessons/ja/webgl-3d-perspective-correct-texturemapping.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html" selected>한국어</a>
    <option value="/webgl/lessons/pt-br/webgl-3d-perspective-correct-texturemapping.html" >Português Brasileiro</a>
    <option value="/webgl/lessons/ru/webgl-3d-perspective-correct-texturemapping.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-3d-perspective-correct-texturemapping.html" >简体中文</a>
</select>


        <div id="toc">
          <ul>  <li>기초</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-getting-webgl2.html">WebGL2 사용법</a></li>
<li><a href="/webgl/lessons/ko/webgl-fundamentals.html">기초</a></li>
<li><a href="/webgl/lessons/ko/webgl-how-it-works.html">WebGL2 작동 원리</a></li>
<li><a href="/webgl/lessons/ko/webgl-shaders-and-glsl.html">WebGL2 셰이더와 GLSL</a></li>
<li><a href="/webgl/lessons/resources/webgl-state-diagram.html">WebGL2 State Diagram</a></li>
        </ul>
  <li>WebGL2 vs WebGL1</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl2-whats-new.html">WebGL2 새로운 기능</a></li>
<li><a href="/webgl/lessons/ko/webgl1-to-webgl2.html">WebGL1에서 WebGL2로의 변경</a></li>
<li><a href="/webgl/lessons/ko/webgl1-to-webgl2-fundamentals.html">WebGLFundamentals.org과 WebGL2Fundamentals.org의 차이점</a></li>
        </ul>
  <li>이미지 처리</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-image-processing.html">이미지 처리</a></li>
<li><a href="/webgl/lessons/ko/webgl-image-processing-continued.html">WebGL2 이미지 처리 심화</a></li>
        </ul>
  <li>2D 이동, 회전, 크기 변환 행렬 계산</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-2d-translation.html">WebGL2 2D 이동</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-rotation.html">WebGL2 2D 회전</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-scale.html">WebGL2 2D 크기 변환</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-matrices.html">WebGL2 2D 행렬</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-orthographic.html">3D 직교 투영</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-perspective.html">3D 원근 투영</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-camera.html">3D - 카메라</a></li>
<li><a href="/webgl/lessons/ko/webgl-matrix-naming.html">3D - 행렬의 이름</a></li>
        </ul>
  <li>Lighting</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-lighting-directional.html">방향성 조명 효과(Directional Lighting)</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-lighting-point.html">점 조명 효과(Point Lighting)</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-lighting-spot.html">스팟 조명 효과(Spot Lighting)</a></li>
        </ul>
  <li>Structure and Organization</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-less-code-more-fun.html">더 적은 코드로 즐겁게 코딩하기</a></li>
<li><a href="/webgl/lessons/ko/webgl-drawing-multiple-things.html">여러 물체를 그리는 법</a></li>
<li><a href="/webgl/lessons/ko/webgl-scene-graph.html">장면(Scene) 그래프</a></li>
        </ul>
  <li>Geometry</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-geometry-lathe.html">3D Geometry - Lathe</a></li>
<li><a href="/webgl/lessons/ko/webgl-load-obj.html">.obj 파일 로딩</a></li>
<li><a href="/webgl/lessons/ko/webgl-load-obj-w-mtl.html">Loading .obj w .mtl files</a></li>
        </ul>
  <li>Textures</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-textures.html">텍스처</a></li>
<li><a href="/webgl/lessons/ko/webgl-data-textures.html">데이터 텍스처</a></li>
<li><a href="/webgl/lessons/ko/webgl-2-textures.html">두개 이상의 텍스처 사용하기</a></li>
<li><a href="/webgl/lessons/ko/webgl-cors-permission.html">교차 출처 이미지(Cross Origin Image)</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html">원근 교정 텍스처 매핑</a></li>
<li><a href="/webgl/lessons/ko/webgl-planar-projection-mapping.html">평면 및 원근 투영 매핑</a></li>
        </ul>
  <li>Rendering To A Texture</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-render-to-texture.html">텍스처에 렌더링하기</a></li>
        </ul>
  <li>Shadows</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-shadows.html">그림자</a></li>
        </ul>
  <li>Techniques</li>
        <ul>
            <li>2D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-2d-drawimage.html">2D - DrawImage</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-matrix-stack.html">2D - 행렬 스택</a></li>
<li><a href="/webgl/lessons/ko/webgl-sprites.html">Sprite</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-cube-maps.html">큐브맵</a></li>
<li><a href="/webgl/lessons/ko/webgl-environment-maps.html">환경맵</a></li>
<li><a href="/webgl/lessons/ko/webgl-skybox.html">Skybox</a></li>
<li><a href="/webgl/lessons/ko/webgl-skinning.html">Skinning</a></li>
<li><a href="/webgl/lessons/ko/webgl-fog.html">Fog</a></li>
<li><a href="/webgl/lessons/ko/webgl-picking.html">Picking (clicking on stuff)</a></li>
        </ul>
  <li>Text</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-text-html.html">텍스트 - HTML</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-canvas2d.html">텍스트 - Canvas 2D</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-texture.html">텍스트 - 텍스처 사용</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-glyphs.html">Text - Using a Glyph Texture</a></li>
        </ul>
  <li>GPGPU</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-gpgpu.html">GPGPU</a></li>
        </ul>
        </ul>
  <li>Tips</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-smallest-programs.html">Smallest Programs</a></li>
<li><a href="/webgl/lessons/ko/webgl-drawing-without-data.html">Drawing Without Data</a></li>
<li><a href="/webgl/lessons/ko/webgl-shadertoy.html">Shadertoy</a></li>
<li><a href="/webgl/lessons/ko/webgl-pulling-vertices.html">Pulling Vertices</a></li>
        </ul>
  <li>Optimization</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-indexed-vertices.html">정점 인덱스 (gl.drawElements)</a></li>
<li><a href="/webgl/lessons/ko/webgl-instanced-drawing.html">인스턴스 드로잉(Instanced Drawing)</a></li>
        </ul>
  <li>기타</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-setup-and-installation.html">설정 및 설치</a></li>
<li><a href="/webgl/lessons/ko/webgl-boilerplate.html">보일러플레이트(Boilerplate)</a></li>
<li><a href="/webgl/lessons/ko/webgl-resizing-the-canvas.html">Canvas 리사이징</a></li>
<li><a href="/webgl/lessons/ko/webgl-animation.html">애니메이션</a></li>
<li><a href="/webgl/lessons/ko/webgl-points-lines-triangles.html">점, 선, 삼각형</a></li>
<li><a href="/webgl/lessons/ko/webgl-multiple-views.html">Multiple Views, Multiple Canvases</a></li>
<li><a href="/webgl/lessons/ko/webgl-visualizing-the-camera.html">Visualizing the Camera</a></li>
<li><a href="/webgl/lessons/ko/webgl-and-alpha.html">WebGL2 알파(Alpha)</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-vs-3d-library.html">2D vs 3D 라이브러리</a></li>
<li><a href="/webgl/lessons/ko/webgl-anti-patterns.html">안티패턴</a></li>
<li><a href="/webgl/lessons/ko/webgl-matrix-vs-math.html">WebGL2 행렬 vs 수학에서의 행렬</a></li>
<li><a href="/webgl/lessons/ko/webgl-precision-issues.html">정밀도 이슈</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#screenshot">스크린샷 찍기</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#preservedrawingbuffer">Canvas Clear 방지</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#tabindex">캔버스에서 키보드 입력 받기</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#html-background">HTML에서 WebGL2를 배경으로 사용하기</a></li>
<li><a href="/webgl/lessons/ko/webgl-cross-platform-issues.html">Cross Platform 문제</a></li>
<li><a href="/webgl/lessons/ko/webgl-qna.html">질문 및 답변</a></li>
        </ul>
  <li>Reference</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-attributes.html">Attributes</a></li>
<li><a href="/webgl/lessons/ko/webgl-texture-units.html">텍스처 유닛</a></li>
<li><a href="/webgl/lessons/ko/webgl-framebuffers.html">Framebuffer</a></li>
<li><a href="/webgl/lessons/ko/webgl-readpixels.html">readPixels</a></li>
<li><a href="/webgl/lessons/ko/webgl-references.html">참고 자료</a></li>
        </ul></ul>
<ul>
  <li><a href="/docs/">Helper API Docs</a></li>
  <li><a href="https://twgljs.org">TWGL, A tiny WebGL helper library</a></li>
  <li><a href="https://github.com/gfxfundamentals/webgl2-fundamentals">github</a></li>
</ul>
        </div>
    </div>
    <div class="lesson-comments">
        
    <div>이슈나 버그가 있나요? <a href="https://github.com/greggman/webgl2-fundamentals/issues">깃헙에서 이슈 만들기</a>.</div>
  

        <div id="disqus_thread"></div>
        <script>
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webgl2fundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL2 3D 원근 교정 텍스처 매핑';
            var disqus_title = 'WebGL2 3D 원근 교정 텍스처 매핑';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webgl2fundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>
</body>
<script>
const settings = {
  contribTemplate: "<a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a>님, <br>당신의 <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} 기여</a>에 감사드립니다.",
  owner: "gfxfundamentals",
  repo: "webgl2-fundamentals",
};
</script>
<script src="/contributors.js"></script>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js" type="module"></script>
<script>
</script>


</html>



